/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define(["exports","ojs/ojdvt-toolkit","ojs/ojdvt-timecomponent","ojs/ojtimeaxis-toolkit","ojs/ojdvt-overview"],function(e,t,i,s,r){"use strict";var n=function(e){this.Init(e)};t.Obj.createSubclass(n,i.TimeComponentKeyboardHandler),n.prototype.processKeyDown=function(e){if(!this._eventManager._component.isDiscreteNavigationMode())return n.superclass.processKeyDown.call(this,e);if(e.keyCode&&e.keyCode==t.KeyboardEvent.SPACE||e.keyCode==t.KeyboardEvent.ENTER)return this._eventManager.handleArrowPress(e);if(t.KeyboardEvent.isPlus(e)||t.KeyboardEvent.isEquals(e)||t.KeyboardEvent.isMinus(e)||t.KeyboardEvent.isUnderscore(e))t.EventManager.consumeEvent(e);else if(e.keyCode===t.KeyboardEvent.PAGE_UP&&e.shiftKey)this._eventManager.prevPage();else{if(e.keyCode!==t.KeyboardEvent.PAGE_DOWN||!e.shiftKey)return n.superclass.processKeyDown.call(this,e);this._eventManager.nextPage()}},n.getNextNavigable=function(e,i,s){var r=e.getSeries(),a=e.getSeriesIndex(),o=t.Agent.isRightToLeft(r.getCtx()),l=r.isVertical(),h=s.length>1;if(!o&&t.KeyboardEvent.RIGHT_ARROW===i.keyCode||o&&t.KeyboardEvent.LEFT_ARROW===i.keyCode){if(!l)return n.getNextItem(e,s[a],!0);if(h&&1!==a)return n.getClosestItem(e,s[1])}else if(!o&&t.KeyboardEvent.LEFT_ARROW===i.keyCode||o&&t.KeyboardEvent.RIGHT_ARROW===i.keyCode){if(!l)return n.getNextItem(e,s[a],!1);if(h&&0!==a)return n.getClosestItem(e,s[0])}else if(t.KeyboardEvent.DOWN_ARROW===i.keyCode){if(l)return n.getNextItem(e,s[a],!0);if(h&&1!==a)return n.getClosestItem(e,s[1])}else if(t.KeyboardEvent.UP_ARROW===i.keyCode){if(l)return n.getNextItem(e,s[a],!1);if(h&&0!==a)return n.getClosestItem(e,s[0])}return null},n.getNextItem=function(e,t,i){var s=t.indexOf(e)+(i?1:-1);return s>=0&&s<t.length?t[s]:null},n.getClosestItem=function(e,t){if(t.length>0){for(var i=t[0],s=e.getLoc(),r=Math.abs(s-i.getLoc()),n=1;n<t.length;n++){var a=Math.abs(s-t[n].getLoc());a<r&&(r=a,i=t[n])}return i}return null};var a=new Object;t.Obj.createSubclass(a,t.Obj),a.getDatatipColor=function(e){var t=e.getDurationFillColor();return t||null},a.getDatatip=function(e,i,s){var r=e._timeline,n=r.getOptions().tooltip,o=n?n.renderer:null;if(i&&o){var l=r.getCtx().getTooltipManager(),h=e.getDataContext();return l.getCustomTooltip(o,h)}var _=e.getShortDesc();if(null!=_)return _;if(s&&!r.getCtx().isCustomElement()){var c=r.getOptions().translations,d=e.getStartTime(),g=r.getTimeAxis().formatDate(new Date(d),null,"general"),u=t.ResourceUtils.format(c.accessibleItemStart,[g]),m=e.getEndTime();if(m&&m!==d){var p=r.getTimeAxis().formatDate(new Date(m),null,"general");u=u+" "+t.ResourceUtils.format(c.accessibleItemEnd,[p])}var v=e.getTitle();null!=v&&""!==v&&(u=u+" "+t.ResourceUtils.format(c.accessibleItemTitle,[v]));var S=e.getDescription();return null!=S&&""!==S&&(u=u+" "+t.ResourceUtils.format(c.accessibleItemDesc,[S])),u}var f=[];return a._addItemDatatip(f,e,i),a._processDatatip(f,r,i)},a._processDatatip=function(e,i,s){return 0===e.length?null:s?t.HtmlTooltipManager.createElement("table",null,e,["oj-dvt-datatip-table"]):e.join("")},a._addItemDatatip=function(e,t,i){var s=t._timeline,r=t.getTitle();r&&a._addDatatipRow(e,s,"title","Title",r,i);var n=t.getDescription();n&&a._addDatatipRow(e,s,"description","Description",n,i);var o=t.getStartTime(),l=t.getEndTime();o&&l&&l!==o?(a._addDatatipRow(e,s,"start","Start",o,i),a._addDatatipRow(e,s,"end","End",l,i)):a._addDatatipRow(e,s,"date","Date",o,i);var h=t._series.getLabel();null==h&&(h=t._series.getId()),a._addDatatipRow(e,s,"series","Series",h,i)},a._addDatatipRow=function(e,i,s,r,n,o,l){if(null!=n&&""!==n){var h,_=i.getOptions().styleDefaults,c=a.getValueFormat(i,s),d=c.tooltipDisplay,g=i.getOptions().translations;if("off"!==d)if("string"==typeof c.tooltipLabel&&(h=c.tooltipLabel),null==h&&(h=null==r?"":g["label"+r]),n=a.formatValue(i,s,c,n),o){var u=[t.HtmlTooltipManager.createElement("td",_.tooltipLabelStyle,h,["oj-dvt-datatip-label"]),t.HtmlTooltipManager.createElement("td",_.tooltipValueStyle,n,["oj-dvt-datatip-value"])];e.push(t.HtmlTooltipManager.createElement("tr",null,u))}else e.push((e.length>0?"<br>":"")+t.ResourceUtils.format(g.labelAndValue,[h,n]))}},a.getValueFormat=function(e,t){var i=e.getOptions().valueFormats;if(!i)return{};if(i instanceof Array){for(var s={},r=0;r<i.length;r++){var n=i[r];s[n.type]=n}e.getOptions().valueFormats=s,i=s}return i[t]?i[t]:{}},a.formatValue=function(e,t,i,s){var r=i.converter;return"start"===t||"end"===t||"date"===t?e.getTimeAxis().formatDate(new Date(s),r,"general"):r&&r.format?r.format(s):s};var o=function(e,t,i){this.Init(e,t,i)};t.Obj.createSubclass(o,t.Obj),o.DURATION_EVENT="duration-event",o.DURATION_BAR="duration-bar",o.EVENT="event",o.AUTO="auto",o.prototype.Init=function(e,t,i){this._timeline=e,this._seriesIndex=t,this._series=e._series[t],this._id=i.id,this._rowKey=i.rowKey,this._startTime=parseInt(i.startTime),i.endTime&&(this._endTime=parseInt(i.endTime)),this._title=i.title,this._desc=i.desc,this._thumbnail=i.thumbnail,this._shortDesc=i.shortDesc,this._style=i.style,this._data=i.data,this._durationFillColor=i.durationFillColor,this._durationSize=0,this._markerShape=i.markerShape,this._markerScaleX=i.markerScaleX,this._markerScaleY=i.markerScaleY,this._markerShortDesc=i.markerShortDesc,this._markerFillColor=i.markerFillColor,this._markerGradientFill=i.markerGradientFill,this._markerOpacity=i.markerOpacity,this._markerSD=i.markerSD,this._data=i.data,this._state={focused:!1,hovered:!1,selected:!1},this._previousState={focused:!1,hovered:!1,selected:!1}},o.prototype.getId=function(){return this._id},o.prototype.getSeries=function(){return this._series},o.prototype.getSeriesIndex=function(){return this._seriesIndex},o.prototype.getRowKey=function(){return this._rowKey},o.prototype.getStartTime=function(){return this._startTime},o.prototype.setStartTime=function(e){this._startTime=e},o.prototype.getEndTime=function(){return this._endTime},o.prototype.setEndTime=function(e){this._endTime=e},o.prototype.getTitle=function(){return this._title},o.prototype.getDescription=function(){return this._desc},o.prototype.getThumbnail=function(){return this._thumbnail},o.prototype.getShortDesc=function(){var e=this._shortDesc;return"function"==typeof e?e(o.getShortDescContext(this)):e},o.prototype.getStyle=function(){return this._style},o.prototype.setStyle=function(e){this._style=e},o.prototype.getBubble=function(){return this._displayable},o.prototype.setBubble=function(e){this._displayable=e},o.prototype.getContentBubble=function(){return this._displayableContent},o.prototype.setContentBubble=function(e){this._displayableContent=e},o.prototype.getFeeler=function(){return this._feeler},o.prototype.setFeeler=function(e){this._feeler=e},o.prototype.getDurationBar=function(){return this._durationBar},o.prototype.setDurationBar=function(e){this._durationBar=e},o.prototype.getLoc=function(){return this._loc},o.prototype.setLoc=function(e){this._loc=e},o.prototype.getSpacing=function(){return this._spacing},o.prototype.setSpacing=function(e){this._spacing=e},o.prototype.getEndViewportCollision=function(){return this._endViewportCollision},o.prototype.setEndViewportCollision=function(e){this._endViewportCollision=e},o.prototype.getDurationLevel=function(){return this._durationLevel},o.prototype.setDurationLevel=function(e){this._durationLevel=e},o.prototype.getDurationSize=function(){return this._durationSize},o.prototype.setDurationSize=function(e){this._durationSize=e},o.prototype.getDurationFillColor=function(){return this._durationFillColor},o.prototype.setDurationFillColor=function(e){this._durationFillColor=e},o.prototype.getLabel=function(){var e=this._timeline.getOptions().translations,i=this.getStartTime(),s=this._timeline.getTimeAxis().formatDate(new Date(i),null,"general"),r=t.ResourceUtils.format(e.accessibleItemStart,[s]),n=this.getEndTime();if(null!=n&&n!==i){var a=this._timeline.getTimeAxis().formatDate(new Date(n),null,"general");r=r+" "+t.ResourceUtils.format(e.accessibleItemEnd,[a])}var o=this.getTitle();null!=o&&""!==o&&(r=r+" "+t.ResourceUtils.format(e.accessibleItemTitle,[o]));var l=this.getDescription();return null!=l&&""!==l&&(r=r+" "+t.ResourceUtils.format(e.accessibleItemDesc,[l])),r},o.prototype.getWidth=function(){return this._w},o.prototype.setWidth=function(e){this._w=e},o.prototype.getContentWidth=function(){return this._cw},o.prototype.setContentWidth=function(e){this._cw=e},o.prototype.getDurationWidth=function(){return this._dw},o.prototype.setDurationWidth=function(e){this._dw=e},o.prototype.getHeight=function(){return this._h},o.prototype.setHeight=function(e){this._h=e},o.prototype.getMarkerShape=function(){return this._markerShape},o.prototype.getMarkerScaleX=function(){return this._markerScaleX},o.prototype.getMarkerScaleY=function(){return this._markerScaleY},o.prototype.getMarkerShortDesc=function(){return this._markerShortDesc},o.prototype.getMarkerFillColor=function(){return this._markerFillColor},o.prototype.getMarkerGradientFill=function(){return this._markerGradientFill},o.prototype.getMarkerOpacity=function(){return this._markerOpacity},o.prototype.getMarkerSD=function(){return this._markerSD},o.prototype.getNextNavigable=function(e){var i=this._timeline.EventManager.getKeyboardHandler();if(e.type===t.MouseEvent.CLICK||i.isMultiSelectEvent(e))return this;if(i.isNavigationEvent(e)){for(var s=[],r=0;r<this._timeline._series.length;r++)s.push(this._timeline._series[r]._items);return n.getNextNavigable(this,e,s)}return null},o.prototype.getTargetElem=function(){return this._displayable.getElem()},o.prototype.getKeyboardBoundingBox=function(e){return this._displayable.getDimensions(e)},o.prototype.showKeyboardFocusEffect=function(){this._isShowingKeyboardFocusEffect=!0,this.showHoverEffect(),this._timeline.updateScrollForItemNavigation(this)},o.prototype.hideKeyboardFocusEffect=function(){this._isShowingKeyboardFocusEffect=!1,this.hideHoverEffect()},o.prototype.isShowingKeyboardFocusEffect=function(){return this._isShowingKeyboardFocusEffect},o.prototype.getDisplayables=function(){return[this._displayable]},o.prototype.getAriaLabel=function(){var e=[];this.isSelectable()&&e.push(this._timeline.getOptions().translations[this.isSelected()?"stateSelected":"stateUnselected"]);var i=a.getDatatip(this,!1);return t.Displayable.generateAriaLabel(i,e)},o.prototype.getData=function(e){return e?i.TimeComponent.sanitizeData(this._data,"item"):this._data},o.prototype.getItemType=function(){var e=this._data.itemType;return e&&e!==o.AUTO?this._endTime?e===o.EVENT||!this._series.isVertical()&&"alta"!==this._timeline.getCtx().getThemeBehavior()?e:o.DURATION_BAR:o.EVENT:this._endTime?o.DURATION_BAR:o.EVENT},o.prototype.getRendererContext=function(){var e=this.getData()._itemData;return{data:this.getData(!0),itemData:e||null,seriesData:this._series.getData(!0),previousState:this._previousState,state:this._state}},o.prototype.getDataContext=function(){var e=this.getData()._itemData;return{itemType:this.getItemType(),data:this.getData(!0),seriesData:this._series.getData(!0),itemData:e||null,color:a.getDatatipColor(this),component:this._timeline.getOptions()._widgetConstructor}},o.getShortDescContext=function(e){var t=e.getData()._itemData;return{data:e.getData(!0),seriesData:e._series.getData(!0),itemData:t||null}},o.prototype.getDatatip=function(){return a.getDatatip(this,!0)},o.prototype.getDatatipColor=function(){return a.getDatatipColor(this)},o.prototype.setSelectable=function(e){this._isSelectable=e},o.prototype.isSelectable=function(){return this._isSelectable},o.prototype.isSelected=function(){return this._isSelected},o.prototype.setSelected=function(e){this._isSelected=e,this._displayable.setSelected(e),this._updateAriaLabel(),this._timeline._hasOverview&&this._timeline._overview&&(e?(this.changeState("selected",!0,!0),this._timeline._overview.selSelectItem(this.getId())):(this.changeState("selected",!1,!0),this._timeline._overview.selUnselectItem(this.getId())))},o.prototype.changeState=function(e,t,i){i?(this._previousState=this._state,this._state={focused:!1,hovered:!1,selected:!1},this._state[e]=t):this._state[e]=t},o.prototype.showHoverEffect=function(e){var t=this._timeline.EventManager.getFocus()===this;this.changeState("focused",t,!0),this._displayable.showHoverEffect(t),this.changeState("hovered",!0),!e&&this._timeline._hasOverview&&this._timeline._overview.highlightItem(this.getId()),(this._timeline._isVertical||this._series._isRandomItemLayout)&&(this._index||(this._index=this._series._blocks[0].getChildIndex(this.getBubble())),this._series._blocks[0].addChild(this.getBubble()))},o.prototype.hideHoverEffect=function(e){var t=this._timeline.EventManager.getFocus()===this;this.changeState("focused",t,!0),this._displayable.hideHoverEffect(t),this.changeState("hovered",!1),!e&&this._timeline._hasOverview&&this._timeline._overview.unhighlightItem(this.getId()),(this._timeline._isVertical||this._series._isRandomItemLayout)&&this._index&&!this._isSelected&&this._series._blocks[0].addChildAt(this.getBubble(),this._index)},o.prototype._updateAriaLabel=function(){t.Agent.deferAriaCreation()||this._displayable.setAriaProperty("label",this.getAriaLabel())};var l=function(e){this._timeline=e};t.Obj.createSubclass(l,t.Automation),l.TIMELINE_ITEM_STRING="timelineItem",l.prototype.GetSubIdForDomElement=function(e){var t=this._timeline.EventManager.GetLogicalObject(e);if(t&&t instanceof o)for(var i=0;i<this._timeline._series.length;i++){var s=this._timeline._series[i]._items.indexOf(t);if(-1!==s)return l.TIMELINE_ITEM_STRING+"["+i+"]["+s+"]"}return null},l.prototype.getDomElementForSubId=function(e){if(e===t.Automation.TOOLTIP_SUBID)return this.GetTooltipElement(this._timeline);if(e&&this._timeline.hasValidOptions()){var i=e.indexOf("[");if(i>0&&e.substring(0,i)===l.TIMELINE_ITEM_STRING){var s=e.indexOf("]");if(s>0){var r=parseInt(e.substring(i+1,s)),n=parseInt(e.substring(s+2,e.length-1)),a=this._timeline._series[r];if(a){var o=a._items[n];if(o)return o.getDisplayables()[0].getElem()}}}}return null};var h=function(e){this.Init({alta:h.VERSION_1},e)};t.Obj.createSubclass(h,t.BaseComponentDefaults),h.VERSION_1={},h.prototype.getNoCloneObject=function(){return{majorAxis:{scale:!0},minorAxis:{scale:!0,zoomOrder:!0}}};var _=function(){this.Init({alta:_.VERSION_1})};t.Obj.createSubclass(_,t.BaseComponentDefaults),_.VERSION_1={overviewPosition:"below",style:{borderTopStyle:"none",currentTimeIndicatorColor:"#c000d1",handleFillColor:"#ffffff",handleTextureColor:"#b3c6db",leftFilterPanelAlpha:.7,leftFilterPanelColor:"#ffffff",overviewBackgroundColor:"#e6ecf3",rightFilterPanelAlpha:.7,rightFilterPanelColor:"#ffffff",timeAxisBarColor:"#d9dfe3",timeAxisBarAlpha:0,timeIndicatorColor:"#bcc7d2",windowBackgroundAlpha:1,windowBackgroundColor:"#ffffff",windowBorderBottomColor:"#4f4f4f",windowBorderBottomStyle:"solid",windowBorderLeftColor:"#4f4f4f",windowBorderLeftStyle:"solid",windowBorderRightColor:"#4f4f4f",windowBorderRightStyle:"solid",windowBorderTopColor:"#4f4f4f",windowBorderTopStyle:"solid"},_fc:"#aadd77",_do:0,_bc:"#648baf",_bof:"0px",_bs:"solid",_bw:"1px",_dbc:"#648baf",_dbs:"solid",_dbw:"1px",_hbc:"#85bbe7",_hbs:"solid",_hbw:"2px",_hbof:"0px",_hgc:"#ebeced",_hgo:1,_hdbs:"solid",_hdbc:"#85bbe7",_hdbw:"2px",_sbs:"solid",_sbc:"#000000",_sbw:"2px",_sbof:"0px",_sbo:1,_sdbs:"solid",_sdbc:"#000000",_sdbw:"2px",_asbs:"solid",_asbc:"#000000",_asbw:"2px",_asbof:"0px",_asbo:1,_asgc:"#e4f0fa",_asgo:1,_asdbs:"solid",_asdbc:"#000000",_asdbw:"2px",_aoc:"off"};var c=function(e,t){this.Init(e,t)};t.Obj.createSubclass(c,t.Obj),c.prototype.Init=function(e,i){this._view=e,this._rowKey=i.rowKey,this._id=i.id,this._seriesId=i.seriesId,this._time=parseInt(i.time),this._endTime=null==i.endTime?null:parseInt(i.endTime),this._shape=t.SimpleMarker.CIRCLE,"square"===i.shape?this._shape=t.SimpleMarker.RECTANGLE:"plus"===i.shape?this._shape=t.SimpleMarker.PLUS:"diamond"===i.shape?this._shape=t.SimpleMarker.DIAMOND:"triangleUp"===i.shape?this._shape=t.SimpleMarker.TRIANGLE_UP:"triangleDown"===i.shape&&(this._shape=t.SimpleMarker.TRIANGLE_DOWN),this._desc=i.desc,this._color=i.color,this._gradient=i.gradient,null!=i.opacity&&(this._opacity=parseFloat(i.opacity)),null!=i.scaleX&&(this._scaleX=parseFloat(i.scaleX)),null!=i.scaleY&&(this._scaleY=parseFloat(i.scaleY)),null!=i.durationFillColor&&(this._durationFillColor=i.durationFillColor)},c.prototype.getId=function(){return this._id},c.prototype.getSeriesId=function(){return this._seriesId},c.prototype.getRowKey=function(){return this._rowKey},c.prototype.getTime=function(){return this._time},c.prototype.getEndTime=function(){return this._endTime},c.prototype.getScaleX=function(){return this._scaleX},c.prototype.getScaleY=function(){return this._scaleY},c.prototype.getDescription=function(){return this._desc},c.prototype.getColor=function(){return this._color},c.prototype.isGradient=function(){return this._gradient},c.prototype.getShape=function(){return this._shape},c.prototype.getOpacity=function(){return this._opacity},c.prototype.getDisplayable=function(){return this._displayable},c.prototype.setDisplayable=function(e){this._displayable=e},c.prototype.getX=function(){return this._x},c.prototype.setX=function(e){this._x=e},c.prototype.getY=function(){return this._y},c.prototype.setY=function(e){this._y=e};var d=new Object;t.Obj.createSubclass(d,t.Obj),d.getDefaultMarkerShape=function(e){return e._ds},d.getDefaultMarkerScaleX=function(e){return e._dsx},d.getDefaultMarkerScaleY=function(e){return e._dsy},d.getDefaultMarkerOpacity=function(e){return e._do},d.getDefaultMarkerFillColor=function(e){return e._fc},d.getDefaultMarkerPixelHinting=function(e){return e._ph},d.getDefaultMarkerBorderStyles=function(e){var t=new Object;return t._bs=e._bs,t._bc=e._bc,t._bw=e._bw,t._bof=e._bof,t._bo=e._bo,t._gc=e._gc,t._go=e._go,t._dbs=e._dbs,t._dbc=e._dbc,t._dbw=e._dbw,t._hbs=e._hbs,t._hbc=e._hbc,t._hbw=e._hbw,t._hbof=e._hbof,t._hbo=e._hbo,t._hgc=e._hgc,t._hgo=e._hgo,t._hdbs=e._hdbs,t._hdbc=e._hdbc,t._hdbw=e._hdbw,t._sbs=e._sbs,t._sbc=e._sbc,t._sbw=e._sbw,t._sbof=e._sbof,t._sbo=e._sbo,t._sgc=e._sgc,t._sgo=e._sgo,t._sdbs=e._sdbs,t._sdbc=e._sdbc,t._sdbw=e._sdbw,t._asbs=e._asbs,t._asbc=e._asbc,t._asbw=e._asbw,t._asbof=e._asbof,t._asbo=e._asbo,t._asgc=e._asgc,t._asgo=e._asgo,t._asdbs=e._asdbs,t._asdbc=e._asdbc,t._asdbw=e._asdbw,t};var g=function(e){this.Init(e)};t.Obj.createSubclass(g,r.OverviewParser),g.prototype.Init=function(e){this._view=e},g.prototype.parse=function(e){var t=this.ParseRootAttributes(e);return t.timeAxisInfo=this._parseTimeAxis(e.axisTicks),t.markers=this._parseDataNode(e.markers,t.defaultMarkerStyles),t.formattedTimeRanges=e.formattedTimeRanges,t},g.prototype.ParseRootAttributes=function(e){var t=g.superclass.ParseRootAttributes.call(this,e);t.currentTime=parseInt(e.ocd),t.orientation=e.orn,t.selectionMode=e.selmode,t.isRtl=e.rtl.toString(),t.seriesIds=e.sid,t.animationOnClick=e._aoc;var i=new Object;return i.shape=d.getDefaultMarkerShape(e),i.scaleX=d.getDefaultMarkerScaleX(e),i.scaleY=d.getDefaultMarkerScaleY(e),i.opacity=d.getDefaultMarkerOpacity(e),i.color=d.getDefaultMarkerFillColor(e),i.pixelHinting=d.getDefaultMarkerPixelHinting(e),t.defaultMarkerStyles=i,t.labelStyle=e._ls,t},g.prototype._parseDataNode=function(e,t){if(e){for(var i=[],s=0;s<e.length;s++){var r=this.ParseNodeAttributes(e[s],t),n=new c(this._view,r);i.push(n)}return i}return null},g.prototype.ParseNodeAttributes=function(e,t){var i=new Object,s="true"===e._sd;return i.id=e.tid,i.seriesId=e.sid,i.rowKey=e.rk,i.time=e.t,i.endTime=e.et,i.shape=e.s,s&&null==i.shape&&(i.shape=t.shape),i.desc=e.d,i.color=e.c,i.durationFillColor=e.dfc,s&&null==i.color&&(i.color=t.color),i.scaleX=e.sx,s&&null==i.scaleX&&(i.scaleX=t.scaleX),i.scaleY=e.sy,s&&null==i.scaleY&&(i.scaleY=t.scaleY),i.gradient=e.g,i.opacity=e.o,s&&null==i.opacity&&(i.opacity=t.opacity),i},g.prototype._parseTimeAxis=function(e){if(e){var t=new Object;return t.width=null,t.height=null,t.ticks=e,t}return null};const u=function(e,t,i){this.Init(e,t,i)};t.Obj.createSubclass(u,r.Overview),u.ENABLED_STATE="_",u.HOVER_STATE="_h",u.SELECTED_STATE="_s",u.ACTIVE_SELECTED_STATE="_as",u.BORDER_STYLE="bs",u.BORDER_COLOR="bc",u.BORDER_WIDTH="bw",u.DURATION_BORDER_STYLE="dbs",u.DURATION_BORDER_COLOR="dbc",u.DURATION_BORDER_WIDTH="dbw",u.BORDER_OFFSET="bof",u.BORDER_OPACITY="bo",u.GLOW_COLOR="gc",u.GLOW_OPACITY="go",u.FILL_COLOR="fc",u.newInstance=function(e,t,i){return new u(e,t,i)},u.prototype.Init=function(e,i,s){u.superclass.Init.call(this,e,i,s);var n=[t.ColorUtils.getPound(t.ColorUtils.getBrighter("#aadd77",.35)),"#aadd77",t.ColorUtils.getPound(t.ColorUtils.getDarker("#aadd77",.5))];r.OverviewUtils.supportsTouch()&&(n=["#aadd77"]),null!=s&&(this._durationColors=s.getOptions().styleDefaults.series.colors),this._defColors=n,this._markerBorderFill=t.SolidFill.invisibleFill(),this._markerSize=12},u.prototype.initDefaults=function(){this.Defaults=new _},u.prototype.getParser=function(e){return new g(this)},u.prototype._applyParsedProperties=function(e){u.superclass._applyParsedProperties.call(this,e),this._selectionMode=e.selectionMode,this._markers=e.markers,this._seriesIds=e.seriesIds,this._defaultMarkerStyles=e.defaultMarkerStyles,this._borderStyles=d.getDefaultMarkerBorderStyles(this.Options),e.labelStyle&&(this._labelStyle=new t.CSSStyle(e.labelStyle));if("solid"===this.getStyle(u.ENABLED_STATE,u.BORDER_STYLE))var i=parseInt(this.getStyle(u.ENABLED_STATE,u.BORDER_OFFSET),10);else i=1;if("solid"===this.getStyle(u.ACTIVE_SELECTED_STATE,u.BORDER_STYLE))var s=parseInt(this.getStyle(u.ACTIVE_SELECTED_STATE,u.BORDER_OFFSET),10);else s=1;if("solid"===this.getStyle(u.SELECTED_STATE,u.BORDER_STYLE))var r=parseInt(this.getStyle(u.SELECTED_STATE,u.BORDER_OFFSET),10);else r=1;this.isItemSelectionEnabled()?this._markerSpacingOffset=Math.max(s,r,i,1)/2+1:this._markerSpacingOffset=1,this._defOpacity=this.isVertical()?0:.75,this._defAlphas=[this._defOpacity,this._defOpacity,this._defOpacity],this._radialFill=new t.LinearGradientFill(250,this._defColors,this._defAlphas),this._linearFill=new t.LinearGradientFill(180,this._defColors,this._defAlphas);var n=this.isVertical()?0:1;this._border=new t.Stroke("#aadd77",n)},u.prototype.getSeriesIds=function(){return null==this._seriesIds?null:this._seriesIds.split(" ")},u.prototype.isItemSelectionEnabled=function(){return"none"!==this._selectionMode},u.prototype.getDrawableById=function(e){for(var i=this.getNumChildren(),s=0;s<i;s++){var r=this.getChildAt(s);if(r&&r._node&&t.Obj.compareValues(this.getCtx(),e,r._node.getId()))return r}return null},u.prototype.getItemId=function(e){return e._node?e._node.getId():e.getId().substr(5)},u.prototype.getStyle=function(e,t){return this._borderStyles[e+t]},u.prototype.getX=function(e){return null!=e._node?e._node.getX():e.getMatrix().getTx()},u.prototype.getY=function(e){return null!=e._node?e._node.getY():e.getMatrix().getTy()},u.prototype.getScaleX=function(e){var t=e.getScaleX();return null==t&&(t=this.isVertical()?(this.Width-this.getTimeAxisWidth()-4)/2:1),t},u.prototype.getScaleY=function(e){var t=e.getScaleY();return null==t&&(t=1),t},u.prototype.renderData=function(e,t){if(u.superclass.renderData.call(this,e,t),null!=this._markers){if(this.isVertical())var i=this._yMin,s=this._yMax;else i=this._xMin,s=this._xMax;for(var r=this.calculateOptimalSize(i,s,e,t,this._markerSize),n=[],a=0;a<this._markers.length;a++){var o=this._markers[a];null==o._endTime?this.addMarker(o,r):n[n.length]=o}this.prepareDurations(n),this.addDurations(n,i,s),this._markerSize=r}},u.prototype.prepareDurations=function(e){this._maxDurationY=0;var t=null;null==this._durationColorMap&&(this._durationColorMap=new Object);for(var i=0;i<e.length;i++){var s=e[i],r=s.getId(),n=s.getSeriesId();n!==t&&(this._colorCount=0,t=n),s._durationLevel=this.calculateDurationY(s,e),null==s._durationFillColor&&(null==this._durationColorMap[r]?(this._durationColorMap[r]=this._colorCount,s._durationFillColor=this._durationColors[this._colorCount],this._colorCount++,this._colorCount===this._durationColors.length&&(this._colorCount=0)):s._durationFillColor=this._durationColors[this._durationColorMap[r]])}},u.prototype.getDurationColorMap=function(){return this._durationColorMap?this._durationColorMap:null},u.prototype.calculateOptimalSize=function(e,t,i,s,n){var a=new Object;a.max=1,a.arr=[];for(var o=this.isVertical()?s:i,l=0;l<this._markers.length;l++){var h=this._markers[l];if(null!=h._endTime){var _=r.OverviewUtils.getDatePosition(e,t,h.getTime(),o);this.isHorizontalRTL()&&(_=o-_),h.setX(_)}else if(this.calculateSize(h,e,t,o,n/2,a,s),a.max>s)break}return a.max>s&&n>1?this.calculateOptimalSize(e,t,i,s,n-1):n},u.prototype.addMarker=function(e,i){var s,n,a="_mrk_"+e.getId(),o=e.getColor(),l=e.isGradient(),h=e.getOpacity();null==h&&0===(h=this._defOpacity)&&null!=o&&(h=1);var _=this.getScaleX(e),c=this.getScaleY(e),d=e.getShape();if(this.isVertical()){d=t.SimpleMarker.RECTANGLE;var g=2*_,m=2*c,p=e.getY()+g/2,v=e.getX()+m/2}else g=i*_,m=i*c,p=e.getX()+g/2,v=e.getY()+m/2;var S=new t.SimpleMarker(this.getCtx(),d,p,v,g,m,null,null,null,a);if(S._node=e,null==o&&h===this._defOpacity&&null==l)s=d===t.SimpleMarker.CIRCLE?this._radialFill:this._linearFill,n=this._border;else{var f=this._defColors;if(null!=o)if(r.OverviewUtils.supportsTouch())f=[o];else f=[t.ColorUtils.getBrighter(o,.5),o,t.ColorUtils.getDarker(o,.5)];var T=[h,h,h];s=null==l?d===t.SimpleMarker.CIRCLE?new t.LinearGradientFill(250,f,T):new t.LinearGradientFill(180,f,T):new t.SolidFill(o,T[0]),n=new t.Stroke(o,h)}S.setFill(s),S.setStroke(n),this.isItemSelectionEnabled()&&S.setSelectable(!0);var b=this.getNumChildren(),y=this.getChildAt(b-1);return b>this._lastChildIndex&&("tb"===y.getId()||"arr"===y.getId())?this.addChildAt(S,b-this._lastChildIndex):this.addChild(S),e.setDisplayable(S),this.applyState(S,u.ENABLED_STATE),!this.isVertical()&&d!==t.SimpleMarker.RECTANGLE&&d!==t.SimpleMarker.DIAMOND&&d!==t.SimpleMarker.TRIANGLE_UP&&d!==t.SimpleMarker.TRIANGLE_DOWN&&d!==t.SimpleMarker.PLUS||"false"===this._defaultMarkerStyles.pixelHinting||S.setPixelHinting(!0),S},u.prototype.addDurations=function(e,i,s){for(var n=this.getCtx(),a=this._maxDurationY;a>0;a--)for(var o=0;o<e.length;o++){var l=e[o];if(a===l._durationLevel){var h=r.OverviewUtils.getDatePosition(i,s,l.getTime(),this.isVertical()?this.Height:this.Width),_="_drn_"+l.getId(),c=9+5*l._durationLevel,d=r.OverviewUtils.getDatePosition(i,s,l.getEndTime(),this.isVertical()?this.Height:this.Width);if(this.isVertical())if(this.isRTL())var g=new t.Rect(n,0,h,c,d-h,_);else g=new t.Rect(n,this.Width-c,h,c,d-h,_);else g=this.isRTL()?new t.Rect(n,this.Width-d,this.Height-c-20,d-h,c,_):new t.Rect(n,h,this.Height-c-20,d-h,c,_);g.setFill(new t.SolidFill(l._durationFillColor));var m=new t.Stroke(this.getStyle(u.ENABLED_STATE,u.DURATION_BORDER_COLOR),1,1);g.setStroke(m),g.setPixelHinting(!0),g._node=l,this.addChild(g),l._durationBar=g,l._durationY=c-2}}this.removeChild(this._timeAxisTopBar),this.addChild(this._timeAxisTopBar)},u.prototype.calculateSize=function(e,t,i,s,n,a,o){var l=n*this.getScaleX(e)+this._markerSpacingOffset,h=n*this.getScaleY(e)+this._markerSpacingOffset,_=e.getTime(),c=r.OverviewUtils.getDatePosition(t,i,_,s);if(this.isHorizontalRTL()&&(c=s-c-2*l),this.isVertical()){var d=0;"solid"===this.getStyle(u.ENABLED_STATE,u.BORDER_STYLE)&&(d=parseInt(this.getStyle(u.ENABLED_STATE,u.BORDER_WIDTH),10)),g=this.isRTL()?d+4:this.Width-2*this.getScaleX(e)-d-4}else{var g=3;this.isOverviewAbove()&&(g+=this.getTimeAxisHeight());for(var m=0,p=[],v=0;v<a.arr.length;v++){var S=a.arr[v],f=S.getX(),T=this.getScaleX(S);Math.abs(c-f)<n*T+this._markerSpacingOffset+l&&p.push(S)}for(v=0;v<p.length;v++){var b=this.calculateY(p,e.getShape(),c,g,l,h,m,n,o);if(m=b.maxy,b.cy===g){g=b.cy;break}g=b.cy}}e.setX(c),e.setY(g),a.arr.push(e),null!=m&&m>a.max&&(a.max=m)},u.prototype.calculateY=function(e,i,s,r,n,a,o,l,h){for(var _=0;_<e.length;_++){var c=e[_],d=c.getX(),g=c.getY(),u=c.getShape(),m=this.getScaleX(c),p=this.getScaleY(c);if(i===t.SimpleMarker.CIRCLE&&u===t.SimpleMarker.CIRCLE&&n===a&&m===p)var v=Math.abs(s-d),S=l*m+this._markerSpacingOffset+n,f=Math.sqrt(S*S-v*v);else f=l*p+this._markerSpacingOffset+a;if(f>Math.abs(r-g)&&(r=g+f,o=Math.max(o,r+f),l>=1&&void 0!==h&&o>h))break}return{cy:r,maxy:o}},u.prototype.calculateDurationY=function(e,t){var i=t.length,s=e.getTime(),r=e._durationLevel;null==r&&(r=1);for(var n=0;n<i;n++){var a=t[n];if(a!==e){var o=a.getEndTime();if(null!=o){var l=a.getTime(),h=a._durationLevel;null==h&&(h=1),s>=l&&s<=o&&r===h&&(r=h+1,e._durationLevel=r,r=this.calculateDurationY(e,t))}}}return r>this._maxDurationY&&(this._maxDurationY=r),r},u.prototype.HandleShapeMouseOver=function(e){var i=u.superclass.HandleShapeMouseOver.call(this,e);if(null!=i){if(null!=i._node){var s=i._node.getDescription();null!=s&&this.getCtx().getTooltipManager().showDatatip(e.pageX,e.pageY,s,"#000000")}if(this.isItemSelectionEnabled()){var r=!1;if(null!=this._selectedMarkers)for(var n=0;n<this._selectedMarkers.length;n++)if(i===this._selectedMarkers[n]){r=!0;break}if(!r){var a=this.getItemId(i),o=t.EventFactory.newTimelineOverviewEvent("highlight",a);this.dispatchEvent(o),this.highlightMarker(i)}}}},u.prototype.HandleShapeMouseOut=function(e){var i=u.superclass.HandleShapeMouseOut.call(this,e);if(null!=i&&!this.isMovable(i)){this.getCtx().getTooltipManager().hideTooltip();var s=!1;if(null!=this._selectedMarkers)for(var r=0;r<this._selectedMarkers.length;r++)if(i===this._selectedMarkers[r]){s=!0;break}if(!s){var n=this.getItemId(i),a=t.EventFactory.newTimelineOverviewEvent("unhighlight",n);this.dispatchEvent(a),this.unhighlightMarker(i)}}},u.prototype.HandleShapeClick=function(e,i,s){var r=u.superclass.HandleShapeClick.call(this,e,i,s);null!=r&&this.HandleMarkerClick(r,e.ctrlKey||e.shiftKey||t.Agent.isTouchDevice())},u.prototype.HandleMarkerClick=function(e,t){if(this.isItemSelectionEnabled()&&(this.selectItem(e,t),null!=e._node.getTime())){var i,s=this.getSlidingWindow();this.isVertical()?(i=this.getX(e)-s.getHeight()/2,this.animateSlidingWindow(null,i)):(i=this.getX(e)-s.getWidth()/2,this.animateSlidingWindow(i))}},u.prototype.highlightItem=function(e){var t=this.getDrawableById(e);null!=t&&this.highlightMarker(t)},u.prototype.unhighlightItem=function(e){var t=this.getDrawableById(e);null!=t&&this.unhighlightMarker(t)},u.prototype.highlightMarker=function(e){if(null!=this._selectedMarkers)for(var t=0;t<this._selectedMarkers.length;t++){if(e===this._selectedMarkers[t])return}this.applyState(e,u.HOVER_STATE)},u.prototype.unhighlightMarker=function(e){if(null!=this._selectedMarkers)for(var t=0;t<this._selectedMarkers.length;t++){if(e===this._selectedMarkers[t])return}this.applyState(e,u.ENABLED_STATE)},u.prototype.selSelectItem=function(e){var t=this.getDrawableById(e);null!=t&&this.addSelectedMarker(t)},u.prototype.selUnselectItem=function(e){var t=this.getDrawableById(e);null!=t&&this.removeSelectedMarker(t)},u.prototype.selectItem=function(e,i){var s=this.getItemId(e),r=t.EventFactory.newTimelineOverviewEvent("selection",s,i);this.dispatchEvent(r)},u.prototype.addSelectedMarker=function(e){null==this._selectedMarkers&&(this._selectedMarkers=[]);var t=null;this._selectedMarkers.length>0&&(t=this._selectedMarkers[this._selectedMarkers.length-1]),this._selectedMarkers.push(e),null!=t&&this.applyState(t,u.SELECTED_STATE),this.applyState(e,u.ACTIVE_SELECTED_STATE)},u.prototype.removeSelectedMarker=function(e){if(null!=this._selectedMarkers){for(var t=-1,i=0;i<this._selectedMarkers.length;i++){if(e===this._selectedMarkers[i]){t=i;break}}-1!=t&&(this.applyState(e,u.ENABLED_STATE),this._selectedMarkers.splice(t,1))}},u.prototype.removeAllSelectedMarkers=function(){if(null!=this._selectedMarkers){for(var e=0;e<this._selectedMarkers.length;e++){var t=this._selectedMarkers[e];this.applyState(t,u.ENABLED_STATE)}delete this._selectedMarkers,this._selectedMarkers=null}},u.prototype.applyState=function(e,i){if(e instanceof t.SimpleMarker){var s=!1,r=!1;if("solid"===this.getStyle(i,u.BORDER_STYLE)){s=!0;var n=this.getStyle(i,u.BORDER_COLOR);null==n&&(n="#000000");var a=this.getStyle(i,u.GLOW_COLOR);null!=a&&"none"!==a&&(r=!0)}var o=e._borderMarker,l=e._glowMarker;s||null==o?r||null==l||(this.removeChild(l),e._glowMarker=null):(this.removeChild(o),e._borderMarker=null,null!=l&&(this.removeChild(l),e._glowMarker=null));var h=e.getType();if(s){var _=parseInt(this.getStyle(i,u.BORDER_WIDTH),10),c=parseInt(this.getStyle(i,u.BORDER_OFFSET),10);if(null==o){if(h===t.SimpleMarker.CIRCLE)var d=(e.getDimensions().w+2*c)*e.getScaleX(),g=(e.getDimensions().h+2*c)*e.getScaleY(),m=this.getX(e)-c+d/2,p=this.getY(e)-c+g/2;else this.isVertical()?(d=(e.getDimensions().w+(_+1))*e.getScaleX(),g=(e.getDimensions().h+(_+1))*e.getScaleY(),m=this.getY(e)-(_+1)/2+d/2,p=this.getX(e)-(_+1)/2+g/2):(d=(e.getDimensions().w+2*c)*e.getScaleX(),g=(e.getDimensions().h+2*c)*e.getScaleY(),m=this.getX(e)-c+d/2,p=this.getY(e)-c+g/2);o=new t.SimpleMarker(this.getCtx(),h,m,p,d,g,null,null,null,e.getId()+"_border"),this.addChildAt(o,this.getChildIndex(e)),e._borderMarker=o,o.setFill(this._markerBorderFill)}var v=new t.Stroke(n,this.getStyle(i,u.BORDER_OPACITY),_);if(o.setStroke(v),!this.isVertical()&&h!==t.SimpleMarker.RECTANGLE&&h!==t.SimpleMarker.DIAMOND&&h!==t.SimpleMarker.TRIANGLE_UP&&h!==t.SimpleMarker.TRIANGLE_DOWN&&h!==t.SimpleMarker.PLUS||"false"===this._defaultMarkerStyles.pixelHinting||o.setPixelHinting(!0),r){if(null==l){var S=c-_;h===t.SimpleMarker.CIRCLE?(d=(e.getDimensions().w+2*S)*e.getScaleX(),g=(e.getDimensions().h+2*S)*e.getScaleY(),m=this.getX(e)-S+d/2,p=this.getY(e)-S+g/2):this.isVertical()?(d=(e.getDimensions().w+3)*e.getScaleX(),g=(e.getDimensions().h+3)*e.getScaleY(),m=this.getY(e)+d/2,p=this.getX(e)-1+g/2):(d=(e.getDimensions().w+2*S)*e.getScaleX(),g=(e.getDimensions().h+2*S)*e.getScaleY(),m=this.getX(e)-S+d/2,p=this.getY(e)-S+g/2),l=new t.SimpleMarker(this.getCtx(),h,m,p,d,g,null,null,null,e.getId()+"_glow"),this.addChildAt(l,this.getChildIndex(o)),e._glowMarker=l,l.setFill(this._markerBorderFill)}var f=new t.Stroke(a,this.getStyle(i,u.GLOW_OPACITY),4);l.setStroke(f),!this.isVertical()&&h!==t.SimpleMarker.RECTANGLE&&h!==t.SimpleMarker.DIAMOND&&h!==t.SimpleMarker.TRIANGLE_UP&&h!==t.SimpleMarker.TRIANGLE_DOWN&&h!==t.SimpleMarker.PLUS||"false"===this._defaultMarkerStyles.pixelHinting||l.setPixelHinting(!0)}}}else{var T=e.getId();T&&"_drn_"===T.substring(0,5)&&this.applyDurationState(e,i)}},u.prototype.applyDurationState=function(e,i){var s=this.getStyle(i,u.DURATION_BORDER_COLOR);null==s&&(s="#000000");var r=parseInt(this.getStyle(i,u.DURATION_BORDER_WIDTH),10);e.setStroke(new t.Stroke(s,1,r))},u.prototype.getMarkers=function(){return this._markers};var m=new Object;t.Obj.createSubclass(m,t.Obj),m._DEFAULT_TIMELINE_STYLE="border:1px #d9dfe3;background-color:#f9f9f9;",m._DEFAULT_AXIS_STYLE="background-color:#f9f9f9;border:1px #d9dfe3;",m._DEFAULT_AXIS_SEPARATOR_STYLE="color:#bcc7d2;",m._DEFAULT_SERIES_STYLE="background-color:#f9f9f9;",m._DEFAULT_SERIES_LABEL_BACKGROUND_STYLE="background-color:#f9f9f9",m._DEFAULT_SERIES_LABEL_BACKGROUND_OPACITY=.8,m._DEFAULT_SERIES_LABEL_SPACING=20,m._DEFAULT_SERIES_LABEL_PADDING=2,m._DEFAULT_SERIES_AXIS_SEPARATOR_STYLE="color:#bcc7d2",m._DEFAULT_SERIES_AXIS_LABEL_BACKGROUND_STYLE="background-color:#f9f9f9",m._DEFAULT_SERIES_AXIS_LABEL_BACKGROUND_OPACITY=.8,m._DEFAULT_SERIES_AXIS_LABEL_PADDING=1,m._DEFAULT_DURATION_EVENT_WIDTH=8,m._DEFAULT_OVERVIEW_WIDTH=60,m._DEFAULT_NAV_BUTTON_BACKGROUND_WIDTH=60,m._DEFAULT_NAV_BUTTON_WIDTH=36,m._DEFAULT_OVERVIEW_HEIGHT=100,m._DEFAULT_ITEM_ENABLED_STROKE_WIDTH=1,m._DEFAULT_ITEM_HOVER_STROKE_WIDTH=2,m._DEFAULT_ITEM_SELECTED_STROKE_WIDTH=2,m._DEFAULT_ITEM_INNER_FILL_COLOR="rgba(249,249,249,0)",m._DEFAULT_ITEM_ACTIVE_INNER_STROKE_COLOR="#e4f0fa",m._DEFAULT_ITEM_ENABLED_INNER_STROKE_COLOR="rgba(249,249,249,0)",m._DEFAULT_ITEM_INNER_STROKE_WIDTH=2,m._DEFAULT_BUBBLE_OFFSET=20,m._DEFAULT_CONTENT_BUBBLE_ARROW=7.5,m._DEFAULT_CONTENT_BUBBLE_SPACING=15.5,m._DEFAULT_BUBBLE_SPACING=15,m._DEFAULT_ITEM_CONTENT_SPACING=2,m._DEFAULT_DURATION_FEELER_OFFSET=10,m._DEFAULT_THUMBNAIL_WIDTH=32,m._DEFAULT_THUMBNAIL_HEIGHT=32,m._DEFAULT_ZOOM_CONTROL_DIAMETER=31,m._DEFAULT_ZOOM_CONTROL_PADDING=10.5,m._DEFAULT_ZOOM_CONTROL_SPACING=9,m._DEFAULT_NAVIGATION_ARROW_WIDTH=32,m._DEFAULT_NAVIGATION_ARROW_PADDING=8,m.getItemDescriptionStyle=function(e){var i=e._series.getOptions().styleDefaults.item.descriptionStyle,s=e.getStyle();if(s){var r=new t.CSSStyle(s);i.parseInlineStyle(r)}return i},m.getItemTitleStyle=function(e){var i=e._series.getOptions().styleDefaults.item.titleStyle,s=e.getStyle();if(s){var r=new t.CSSStyle(s);i.parseInlineStyle(r)}return i},m.getReferenceObjectColor=function(e){return e.styleDefaults.referenceObject.color},m.getSeriesLabelStyle=function(e){return e.styleDefaults.series.labelStyle},m.getSeriesLabelBackgroundStyle=function(){return m._DEFAULT_SERIES_LABEL_BACKGROUND_STYLE},m.getSeriesLabelBackgroundOpacity=function(){return m._DEFAULT_SERIES_LABEL_BACKGROUND_OPACITY},m.getSeriesLabelPadding=function(){return m._DEFAULT_SERIES_LABEL_PADDING},m.getSeriesLabelSpacing=function(){return m._DEFAULT_SERIES_LABEL_SPACING},m.getEmptyTextStyle=function(e){return e.styleDefaults.series.emptyTextStyle},m.getBubbleOffset=function(){return m._DEFAULT_BUBBLE_OFFSET},m.getBubbleSpacing=function(){return m._DEFAULT_BUBBLE_SPACING},m.getBubblePadding=function(e){return m.getNumberFromString(e.styleDefaults.item.padding)},m.getBubbleRadius=function(e){return m.getNumberFromString(e.styleDefaults.item.borderRadius)},m.getItemContentSpacing=function(){return m._DEFAULT_ITEM_CONTENT_SPACING},m.getItemFillColor=function(e){var i=e.getStyle();if(i){var s=new t.CSSStyle(i).getStyle(t.CSSStyle.BACKGROUND_COLOR);if(s)return s}return e._series.getOptions().styleDefaults.item.backgroundColor},m.getItemStrokeColor=function(e){var i=e.getStyle();if(i){var s=new t.CSSStyle(i).getStyle(t.CSSStyle.BORDER_COLOR);if(s)return s}return e._series.getOptions().styleDefaults.item.borderColor},m.getItemStrokeWidth=function(){return m._DEFAULT_ITEM_ENABLED_STROKE_WIDTH},m.getItemHoverFillColor=function(e){var t=e._series.getOptions().styleDefaults.item.hoverBackgroundColor;return t||m.getItemFillColor(e)},m.getItemHoverStrokeColor=function(e){var t=e._series.getOptions().styleDefaults.item.hoverBorderColor;return t||m.getItemStrokeColor(e)},m.getItemHoverStrokeWidth=function(e){return m.getNumberFromString(e.styleDefaults.item.hoverStrokeWidth)},m.getItemSelectedFillColor=function(e){var t=e._series.getOptions().styleDefaults.item.selectedBackgroundColor;return t||m.getItemFillColor(e)},m.getItemSelectedStrokeColor=function(e){var t=e._series.getOptions().styleDefaults.item.selectedBorderColor;return t||m.getItemStrokeColor(e)},m.getItemSelectedStrokeWidth=function(){return m._DEFAULT_ITEM_SELECTED_STROKE_WIDTH},m.getSeriesStyle=function(){return m._DEFAULT_SERIES_STYLE},m.getColorsArray=function(e){return e.styleDefaults.series.colors},m.getDurationFeelerOffset=function(){return m._DEFAULT_DURATION_FEELER_OFFSET},m.getThumbnailWidth=function(){return m._DEFAULT_THUMBNAIL_WIDTH},m.getThumbnailHeight=function(){return m._DEFAULT_THUMBNAIL_HEIGHT},m.getSeriesAxisSeparatorStyle=function(){return m._DEFAULT_SERIES_AXIS_SEPARATOR_STYLE},m.getItemInnerActiveStrokeColor=function(){return m._DEFAULT_ITEM_ACTIVE_INNER_STROKE_COLOR},m.getItemInnerFillColor=function(){return m._DEFAULT_ITEM_INNER_FILL_COLOR},m.getItemInnerStrokeColor=function(){return m._DEFAULT_ITEM_ENABLED_INNER_STROKE_COLOR},m.getItemInnerStrokeWidth=function(){return m._DEFAULT_ITEM_INNER_STROKE_WIDTH},m.getTimelineStyle=function(){return m._DEFAULT_TIMELINE_STYLE},m.getOverviewWidth=function(){return m._DEFAULT_OVERVIEW_WIDTH},m.getOverviewHeight=function(){return m._DEFAULT_OVERVIEW_HEIGHT},m.getNavigationArrowWidth=function(){return m._DEFAULT_NAVIGATION_ARROW_WIDTH},m.getNavigationArrowPadding=function(){return m._DEFAULT_NAVIGATION_ARROW_PADDING},m.getOverviewWindowBackgroundColor=function(e){return e.styleDefaults.overview.window.backgroundColor},m.getOverviewWindowBorderColor=function(e){return e.styleDefaults.overview.window.borderColor},m.getOverviewBackgroundColor=function(e){return e.styleDefaults.overview.backgroundColor},m.getOverviewLabelStyle=function(e){return e.styleDefaults.overview.labelStyle},m.getSeriesAxisLabelStyle=function(e){return e.styleDefaults.majorAxis.labelStyle},m.getSeriesAxisLabelBackgroundStyle=function(){return m._DEFAULT_SERIES_AXIS_LABEL_BACKGROUND_STYLE},m.getSeriesAxisLabelBackgroundOpacity=function(){return m._DEFAULT_SERIES_AXIS_LABEL_BACKGROUND_OPACITY},m.getAxisSeparatorStyle=function(){return m._DEFAULT_AXIS_SEPARATOR_STYLE},m.getSeriesAxisLabelPadding=function(){return m._DEFAULT_SERIES_AXIS_LABEL_PADDING},m.getAnimationDuration=function(e){return t.CSSStyle.getTimeMilliseconds(e.styleDefaults.animationDuration)/1e3},m.convertToCSSStyle=function(e){return null==e||e instanceof t.CSSStyle?e:new t.CSSStyle(e)},m.getNumberFromString=function(e){return e?e.match(/(\d+)/)[0]:null},m.getMinDurationEvent=function(){return m._DEFAULT_DURATION_EVENT_WIDTH},m.getContentBubbleArrow=function(){return m._DEFAULT_CONTENT_BUBBLE_ARROW},m.getContentBubbleSpacing=function(){return m._DEFAULT_CONTENT_BUBBLE_SPACING},m.getNavButtonBackgroundWidth=function(){return m._DEFAULT_NAV_BUTTON_BACKGROUND_WIDTH},m.getNavButtonWidth=function(){return m._DEFAULT_NAV_BUTTON_WIDTH},m.getContentBubbleBackgroundColor=function(e){return e.styleDefaults.durationEventOverflow.backgroundColor};const p=function(e,t,i,s,r,n,a,o){this.Init(e,t,i,s,r,n,a,o)};t.Obj.createSubclass(p,t.IconButton),p.prototype.Init=function(e,t,i,s,r,n,a,o){this._id=n,this._timeline=e,this._enabledState=!0,p.superclass.Init.call(this,t,i,s,r,n,a,o),this.setAriaRole("button")},p.prototype.getNextNavigable=function(e){var i=this._timeline.EventManager.getKeyboardHandler(),s=t.Agent.isRightToLeft(this._timeline.getCtx());if(e.type===t.MouseEvent.CLICK||i.isMultiSelectEvent(e))return this;if(!i.isNavigationEvent(e))return null;if(!s&&t.KeyboardEvent.RIGHT_ARROW===e.keyCode||s&&t.KeyboardEvent.LEFT_ARROW===e.keyCode){if("prevNavArrow"===this._id)return this._timeline._nextArrow;for(var r=0;r<this._timeline._series.length;r++){var n=this._timeline._series[r];if(n._items&&n._items.length>0)return n._items[0]}}else if(!s&&t.KeyboardEvent.LEFT_ARROW===e.keyCode||s&&t.KeyboardEvent.RIGHT_ARROW===e.keyCode)return"nextNavArrow"===this._id?this._timeline._prevArrow:this},p.prototype.getAriaLabel=function(){var e=this._timeline.getOptions().translations,i=this._enabledState?[]:[e.navArrowDisabledState];return t.Displayable.generateAriaLabel(this.getAriaString(),i)},p.prototype.getAriaString=function(){var e=this._timeline.getOptions().translations;return"prevNavArrow"===this._id?e.labelAccNavPreviousPage:"nextNavArrow"===this._id?e.labelAccNavNextPage:void 0},p.prototype.getKeyboardBoundingBox=function(e){return this.getDimensions(e)},p.prototype.setEnabled=function(e){this._enabledState=e,this.setAriaProperty("label",this.getAriaLabel()),p.superclass.setEnabled.call(this,e)},p.prototype.getTargetElem=function(){return this.getElem()};var v=new Object;t.Obj.createSubclass(v,t.Obj),v.renderTimeline=function(e){var t;if(v._renderBackground(e),v._renderScrollableCanvas(e),e.hasValidOptions()){e.renderTimeZoomCanvas(e._canvas);var i=e.getTimeZoomCanvas();if(v._renderSeries(e,i),v._renderSeriesLabels(e),v._renderAxis(e,i),e.isDiscreteNavigationMode()?v._renderNavigationArrows(e,i):v._hideNavigationArrows(e,i),e._hasOverview?v._renderOverview(e):e.clearOverview(),e._keyboardHandler)for(var r=0;r<e._series.length;r++)if((t=e._series[r])._items&&t._items.length>0){e.EventManager.setFocusObj(t._items[0]);break}(e.isTimeDirScrollbarOn()||e.isContentDirScrollbarOn())&&v._renderScrollbars(e),v._renderZoomControls(e),e.SelectionHandler&&e.applyInitialSelections(),s.TimeAxisUtils.supportsTouch()&&e._setAriaProperty("flowto",e._series[0].getId());for(var n=0;n<e._series.length;n++)(t=e._series[n]).triggerAnimations()}else v._renderEmptyText(e)},v._renderBackground=function(e){e._background?(e._background.setClipPath(null),e._background.setWidth(e._backgroundWidth),e._background.setHeight(e._backgroundHeight)):e._background=new t.Rect(e.getCtx(),0,0,e._backgroundWidth,e._backgroundHeight,"bg");var i=e.getBackgroundXOffset();e._background.setTranslateX(i),e._background.setCSSStyle(e._style),e._background.setPixelHinting(!0);var s=new t.ClipPath;s.addRect(i,0,e._backgroundWidth,e._backgroundHeight),e._background.setClipPath(s),e._background.getParent()!==e&&e.addChild(e._background)},v._renderScrollableCanvas=function(e){e._canvas||(e._canvas=new t.Container(e.getCtx(),"canvas"),e.addChild(e._canvas))},v._renderSeries=function(e,i){var s=e.getTimeAxis();if(e._series){var r=e.getCtx(),n=t.Agent.isRightToLeft(r),a=e._series.length,o=e.getTimeAxisVisibleSize(a);e.isVertical()||a>1&&e._canvasSize%2!=o%2&&(s.setContentSize(s.getContentSize()+1),o=e.getTimeAxisVisibleSize(a)),e._seriesSize=(e._canvasSize-o)/a;for(var l=0;l<a;l++){var h=e._series[l];h.setClipPath(null);var _=new t.ClipPath;if(e.isVertical()){if(n)var c=Math.abs(l-1);else c=l;if(n&&1===e._series.length){_.addRect(o,0,e._seriesSize,e.getContentLength());var d=new t.Matrix(1,0,0,1,o,0)}else _.addRect(c*(e._seriesSize+o),0,e._seriesSize,e.getContentLength()),d=new t.Matrix(1,0,0,1,c*(e._seriesSize+o),0);var g=e._seriesSize,u=e.getContentLength()}else _.addRect(0,l*(e._seriesSize+o),e.getContentLength(),e._seriesSize),d=new t.Matrix(1,0,0,1,0,l*(e._seriesSize+o)),g=e.getContentLength(),u=e._seriesSize;h.setClipPath(_),h.setMatrix(d),h.getParent()!==i&&i.addChild(h),h.render(e._seriesOptions[l],g,u)}}},v._renderSeriesLabels=function(e){var i,s;if(e._series){var r=e.getCtx(),n=t.Agent.isRightToLeft(r);if(e._seriesLabels)for(var a=0;a<e._seriesLabels.length;a++)e.removeChild(e._seriesLabels[a]);e._seriesLabels=[];for(var o=e._series.length,l=m.getSeriesLabelSpacing(),h=2*t.TransientButton._DEFAULT_RADIUS+6,_=2*l,c=0;c<o;c++){var d=e._series[c],g=d.getLabel();if(null!=g){var u=m.getSeriesLabelStyle(e.Options),p=new t.CSSStyle(m.getSeriesLabelBackgroundStyle());if(d._style){var v=d._style.getStyle(t.CSSStyle.BACKGROUND_COLOR);v&&p.setStyle(t.CSSStyle.BACKGROUND_COLOR,v)}var S=new t.OutputText(r,g,0,0,"sl_s"+c);if(S.setCSSStyle(u),i=S.getDimensions(),e.isVertical())var f=e._seriesSize;else f=e._canvasLength;var T=Math.min(i.w,f-(c-1)*-h-_),b=m.getSeriesLabelPadding(),y=new t.Rect(r,0,0,T+2*b,i.h+2*b,"slb_s"+c);if(y.setCSSStyle(p),y.setAlpha(m.getSeriesLabelBackgroundOpacity()),y.setCornerRadius(3),e.isVertical())E=n?Math.abs(c-1)*(e._canvasSize-T-_)+l+e._startX+(c-1)*h:c*(e._canvasSize-T-_)+l+e._startX+(c-1)*-h,C=e._startY+l;else{if(n)var E=e._canvasLength-T-l-(c-1)*-h;else E=e._startX+l+(c-1)*-h;var C=c*(e._canvasSize-i.h-_)+l+e._startY}s=new t.Matrix(1,0,0,1,E,C),S.setMatrix(s),s=new t.Matrix(1,0,0,1,E-b,C-b),y.setMatrix(s),e.addChild(y),t.TextUtils.fitText(S,T,1/0,e),e._seriesLabels.push(y),e._seriesLabels.push(S)}if(d._isEmpty){var A=d.getEmptyText();if(null!=A){var D=new t.OutputText(r,A,0,0,"et_s"+c);if(D.setCSSStyle(m.getEmptyTextStyle(e.Options)),i=D.getDimensions(),e.isVertical())w=(e._canvasLength-i.h)/2+e._startY,O=n?Math.abs(c-1)*((o-1)*e._seriesSize+e.getTimeAxisVisibleSize(o))+(e._seriesSize-i.w)/2+e._startX:c*(e._seriesSize+e.getTimeAxisVisibleSize(o))+(e._seriesSize-i.w)/2+e._startX;else var O=(e._canvasLength-i.w)/2+e._startX,w=c*(e._seriesSize+e.getTimeAxisVisibleSize(o))+(e._seriesSize-i.h)/2+e._startY;s=new t.Matrix(1,0,0,1,O,w),D.setMatrix(s),e.addChild(D),e._seriesLabels.push(D)}}}}},v._renderNavigationArrows=function(e,i){var r=e.getCtx(),n=t.Agent.isRightToLeft(r),a=e.getContentLength()*e._timeAxisRatio,o=e._series.length,l=e.getTimeAxisVisibleSize(o),h=m.getNavButtonBackgroundWidth(),_=m.getNavButtonWidth(),c=1===o?e._canvasSize-l:e._canvasSize/o-l/2,d=s.TimeAxisUtils.getDatePosition(e._start,e._end,e._viewStartTime,a)+e._discreteOffset-h,g=e._backgroundWidth+d-h;n&&(g=a-g-h-e.getScrollbarPadding()+2*e._discreteOffset,d=a-d-h+2*e._discreteOffset);var u=e.Options.styleDefaults.item.borderColor,S=new t.Stroke(u,1,1),f=e.Options.styleDefaults.series.backgroundColor;e.getOptions().translations;if(null==e._prevArrowContainer){var T=new t.Container(r),b=new t.Rect(r,0,0,h,h,"prevNavContainer"),y=new t.Rect(r,0,0,_,_,"prevNavContainer_i");y.setCornerRadius(4),y.setTranslate(8,8),b.addChild(y),T.addChild(b),T.setTranslate(d,c-_),T.setClassName("oj-timeline-nav-arrow oj-timeline-nav-arrow-previous"),y.setStroke(S),T.setSolidFill(f);var E=t.ToolkitUtils.getIconStyle(r,e._resources.prev),C=new p(e,r,"outlined",{style:E,size:28},null,"prevNavArrow",e.EventManager.prevPage,e.EventManager);C.setTranslate(4,4),y.addChild(C),i.addChild(T),e._prevArrowContainer=T,e._prevArrow=C}else e._prevArrowContainer.setVisible("visible"),e._prevArrowContainer.setTranslate(d,c-_),i.removeChild(e._prevArrowContainer),i.addChild(e._prevArrowContainer);if(null==e._nextArrowContainer){var A=new t.Container(r),D=new t.Rect(r,0,0,h,h,"nextNavContainer"),O=new t.Rect(r,0,0,_,_,"nextNavContainer_i");O.setCornerRadius(4),O.setTranslate(16,8),D.addChild(O),A.addChild(D),A.setTranslate(g,c-_),A.setClassName("oj-timeline-nav-arrow oj-timeline-nav-arrow-next"),O.setStroke(S),A.setSolidFill(f);E=t.ToolkitUtils.getIconStyle(r,e._resources.next);var w=new p(e,r,"outlined",{style:E,size:28},null,"nextNavArrow",e.EventManager.nextPage,e.EventManager);w.setTranslate(4,4),O.addChild(w),i.addChild(A),e._nextArrowContainer=A,e._nextArrow=w}else e._nextArrowContainer.setVisible("visible"),e._nextArrowContainer.setTranslate(g,c-_),i.removeChild(e._nextArrowContainer),i.addChild(e._nextArrowContainer);v._checkDisabledArrows(e)},v._hideNavigationArrows=function(e){null!=e._prevArrowContainer&&e._prevArrowContainer.setVisible(),null!=e._nextArrowContainer&&e._nextArrowContainer.setVisible()},v._checkDisabledArrows=function(e){var t=e.getDiscreteViewportDatePosition(e._discreteViewportCurrentIndexOffset-1),i=e.getDiscreteViewportDatePosition(e._discreteViewportCurrentIndexOffset+1);t.startDate<e._start?(e._prevArrowContainer.addClassName("oj-timeline-nav-arrow-disabled"),e._prevArrow.setEnabled(!1)):(e._prevArrowContainer.removeClassName("oj-timeline-nav-arrow-disabled"),e._prevArrow.setEnabled(!0)),i.endDate>e._end?(e._nextArrowContainer.addClassName("oj-timeline-nav-arrow-disabled"),e._nextArrow.setEnabled(!1)):(e._nextArrowContainer.removeClassName("oj-timeline-nav-arrow-disabled"),e._nextArrow.setEnabled(!0))},v._renderAxis=function(e,i,r){var n=e.getCtx(),a=t.Agent.isRightToLeft(n),o=e.getTimeAxis(),l=e._series.length,h=e.getTimeAxisSize(),_=e.getTimeAxisVisibleSize(l),c=1===l?e._canvasSize-_:e._canvasSize/l-_/2,d=e.getContentLength();if(a&&e.isVertical()&&1===e._series.length&&(c=0),o.getParent()!==i&&i.addChild(o),e.isVertical()){var g=new t.Matrix(1,0,0,1,c,0);o.render({_viewStartTime:e._viewStartTime,_viewEndTime:e._viewEndTime,_throttle:r},h,d)}else{var u=e.isDiscreteNavigationMode(),p=m.getNavButtonBackgroundWidth();d=u?d*e._timeAxisRatio:d;var S=s.TimeAxisUtils.getDatePosition(e._start,e._end,e._viewStartTime,d),f=Math.max(s.TimeAxisUtils.getPositionDate(e._start,e._end,S-p,d),e._start),T=s.TimeAxisUtils.getDatePosition(e._start,e._end,e._viewEndTime,d),b=Math.min(s.TimeAxisUtils.getPositionDate(e._start,e._end,T+p,d),e._end),y=u?f:e._viewStartTime,E=u?b:e._viewEndTime;g=new t.Matrix(1,0,0,1,e._discreteOffset,c),o.render({_viewStartTime:y,_viewEndTime:E,_throttle:r},d,h)}o.setMatrix(g),v._renderSeriesTimeAxis(e,e._fetchStartPos,e._fetchEndPos,e.getTimeZoomCanvas(),d)},v._renderSeriesTimeAxis=function(e,i,r,n,a){var o=e.getCtx(),l=t.Agent.isRightToLeft(o),h=(e.isDiscreteNavigationMode()?e._discreteOffset:0)*(l?-1:1);if(e._majorAxisLabels)for(var _=0;_<e._majorAxisLabels.length;_++)n.removeChild(e._majorAxisLabels[_]);if(e._majorAxisLabels=[],e._seriesScale){var c,d,g=e._start,u=e._end;if(e._customTimeScales&&e._customTimeScales[e._seriesScale]){var p=e._customTimeScales[e._seriesScale];c=p.times,d=p.labels}else if(e._seriesCustomFormatScales&&e._seriesCustomFormatScales[e._seriesScale]){var S=e._seriesCustomFormatScales[e._seriesScale];c=S.times,d=S.labels}else{c=[],d=[];var f=s.TimeAxisUtils.getPositionDate(g,u,i,a),T=e._seriesTimeAxis.adjustDate(f),b=s.TimeAxisUtils.getDatePosition(g,u,T,a);for(c.push(T.getTime());b<r;)d.push(e._seriesTimeAxis.formatDate(T)),T=e._seriesTimeAxis.getNextDate(T.getTime()),b=s.TimeAxisUtils.getDatePosition(g,u,T,a),c.push(T.getTime())}var y=m.getSeriesAxisLabelStyle(e.Options),E=m.getSeriesAxisLabelPadding(),C=new t.CSSStyle(m.getSeriesAxisLabelBackgroundStyle());if(e._series[0]&&e._series[0]._style){var A=e._series[0]._style.getStyle(t.CSSStyle.BACKGROUND_COLOR);A&&C.setStyle(t.CSSStyle.BACKGROUND_COLOR,A)}for(var D=m.getSeriesAxisLabelBackgroundOpacity(),O=0;O<d.length;O++){var w=d[O],x=c[O];b=s.TimeAxisUtils.getDatePosition(g,u,x,a)+h;var I=s.TimeAxisUtils.getDatePosition(g,u,c[O+1],a)+h-b;if(l)L=e.isVertical()?v._addLabel(o,n,e._canvasSize-5,w,I,b+18,y,"o_label"+b+"_s0",!0,C,D,E,e._majorAxisLabels,l):v._addLabel(o,n,a-(b+5),w,I,e._seriesSize-2,y,"o_label"+b+"_s0",!0,C,D,E,e._majorAxisLabels,l);else if(e.isVertical())var L=v._addLabel(o,n,5,w,I,b+18,y,"o_label"+b+"_s0",!0,C,D,E,e._majorAxisLabels,l);else L=v._addLabel(o,n,b+5,w,I,e._seriesSize-2,y,"o_label"+b+"_s0",!0,C,D,E,e._majorAxisLabels,l);L.time=c[O]}}},v._renderOverview=function(e){var i=e.getCtx(),s=t.Agent.isRightToLeft(i);if(null==e._overviewCanvas){var r=!0;e._overviewCanvas=new t.Container(i,"oCanvas")}else e._overviewCanvas.removeChildren(),e._overviewCanvas.setClipPath(null);var n,a,o,l,h=e._style.getBorderWidth(),_=h/2;e.isVertical()?(n=e._overviewSize,a=e._backgroundHeight-h,l=_,o=s?_:e._backgroundWidth-e._overviewSize-_):(n=e._backgroundWidth-h,a=e._overviewSize,l=e._backgroundHeight-e._overviewSize-_,o=_+e.getBackgroundXOffset()),e._overviewCanvas.setTranslateX(o),e._overviewCanvas.setTranslateY(l);var c=new t.ClipPath;c.addRect(o,l,n,a),e._overviewCanvas.setClipPath(c),r&&e.addChild(e._overviewCanvas),e._overview=new u(i,e.HandleEvent,e),e._overviewCanvas.addChild(e._overview);var d=e._getOverviewObject();e._overview.render(d,n,a),e.isDiscreteNavigationMode()&&(e._overview.setMouseEnabled(!1),e._overview._windowLeftGrippy.setVisible(),e._overview._windowRightGrippy.setVisible())},v._renderScrollbars=function(e){var i=e.getCtx(),s=e.getScrollbarPadding(),r=e._series.length;if(null==e._scrollbarsCanvas?(e._scrollbarsCanvas=new t.Container(i,"sbCanvas"),e.addChild(e._scrollbarsCanvas)):(e._scrollbarsCanvas.removeChildren(),e.setTimeDirScrollbar(null),e.setContentDirScrollbar(null)),e.isTimeDirScrollbarOn()){if(e.isVertical()){if(t.Agent.isRightToLeft(e.getCtx()))var n=2*s+1;else n=e.Width-1.5*s;var a=e.getCanvasLength()}else n=e.getCanvasLength(),a=e.Height-1.5*s;var o=v._prerenderTimeDirScrollbar(e,e._scrollbarsCanvas,new t.Rectangle(0,0,n,a))}if(e.isContentDirScrollbarOn()){e.isVertical()?(n=e._seriesSize,a=e.Height-1.5*s):(n=t.Agent.isRightToLeft(e.getCtx())?2*s+1:e.Width-1.5*s,a=e._seriesSize);for(var l=[],h=0;h<r;h++)l[h]=v._prerenderContentDirScrollbar(e,e._scrollbarsCanvas,new t.Rectangle(0,0,n,a),h)}if(e.timeDirScrollbar){var _={};_.color=e.timeDirScrollbarStyles.getStyle(t.CSSStyle.COLOR),_.backgroundColor=e.timeDirScrollbarStyles.getStyle(t.CSSStyle.BACKGROUND_COLOR),_.min=e._start,_.max=e._end,e.isVertical()?(_.isReversed=!1,_.isHorizontal=!1,e.timeDirScrollbar.setTranslateY(e.getStartYOffset())):(_.isReversed=t.Agent.isRightToLeft(i),_.isHorizontal=!0,e.timeDirScrollbar.setTranslateX(e.getStartXOffset())),null!=o&&(e.timeDirScrollbar.render(_,o.w,o.h),e.timeDirScrollbar.setViewportRange(e._viewStartTime,e._viewEndTime))}if(e.contentDirScrollbar)for(h=0;h<r;h++){if((_={}).color=e.contentDirScrollbarStyles.getStyle(t.CSSStyle.COLOR),_.backgroundColor=e.contentDirScrollbarStyles.getStyle(t.CSSStyle.BACKGROUND_COLOR),_.isHorizontal=e.isVertical(),0==h){_.min=0;var c=null!=l[h]&&null!=l[h].h?l[h].h:0;_.max=Math.max(e._series[h]._maxOverflowValue,c),e.isVertical()?t.Agent.isRightToLeft(i)?(_.isReversed=!1,2===r?e.contentDirScrollbar[h].setTranslateX(e.getStartXOffset()+e._seriesSize+e.getTimeAxisVisibleSize(r)):e.contentDirScrollbar[h].setTranslateX(e.getStartXOffset()+e.getTimeAxisVisibleSize(r))):(_.isReversed=!0,e.contentDirScrollbar[h].setTranslateX(e.getStartXOffset())):(_.isReversed=!0,e.contentDirScrollbar[h].setTranslateY(e.getStartYOffset()))}else _.min=0,_.max=Math.max(e._series[h]._maxOverflowValue,l[h].h),e.isVertical()?t.Agent.isRightToLeft(i)?(_.isReversed=!0,e.contentDirScrollbar[h].setTranslateX(e.getStartXOffset())):(_.isReversed=!1,e.contentDirScrollbar[h].setTranslateX(e.getStartXOffset()+e._seriesSize+e.getTimeAxisVisibleSize(r))):(_.isReversed=!1,e.contentDirScrollbar[h].setTranslateY(e.getStartYOffset()+e._seriesSize+e.getTimeAxisVisibleSize(r)));e.contentDirScrollbar[h].render(_,l[h].w,l[h].h),e.contentDirScrollbar[h].setViewportRange(0,e._seriesSize)}},v._prerenderTimeDirScrollbar=function(e,i,s){if(e.setTimeDirScrollbar(new t.SimpleScrollbar(e.getCtx(),e.HandleEvent,e)),i.addChild(e.timeDirScrollbar),e.isVertical())var r="right",n=t.CSSStyle.toNumber(e.timeDirScrollbarStyles.getWidth()),a=s.h;else r="bottom",n=s.w,a=t.CSSStyle.toNumber(e.timeDirScrollbarStyles.getHeight());return t.LayoutUtils.position(s,r,e.timeDirScrollbar,n,a,0),new t.Dimension(n,a)},v._prerenderContentDirScrollbar=function(e,i,s,r){if(e.setContentDirScrollbar(new t.SimpleScrollbar(e.getCtx(),e.HandleEvent,e),r),i.addChild(e.contentDirScrollbar[r]),e.isVertical())var n="bottom",a=s.w,o=t.CSSStyle.toNumber(e.contentDirScrollbarStyles.getHeight());else n="right",a=t.CSSStyle.toNumber(e.contentDirScrollbarStyles.getWidth()),o=s.h;return t.LayoutUtils.position(s,n,e.contentDirScrollbar[r],a,o,0),new t.Dimension(a,o)},v._renderZoomControls=function(e){var i=e.getCtx(),s=e._resources,r=t.Agent.isRightToLeft(i);if(e.isDiscreteNavigationMode())e.zoomin&&(e.zoomin.setVisible(),e.zoomout.setVisible());else{var n={zoomInProps:{imageSize:16,class:s.zoomIn},zoomOutProps:{imageSize:16,class:s.zoomOut}},a=e.getStartXOffset()+m._DEFAULT_ZOOM_CONTROL_PADDING;r&&(e._isVertical&&e._hasOverview?a-=e._overviewSize:a-=e.getBackgroundXOffset(),a=e._backgroundWidth-a-m._DEFAULT_ZOOM_CONTROL_DIAMETER),n.zoomInProps.posX=a,n.zoomOutProps.posX=a;var o=e._startY+m._DEFAULT_ZOOM_CONTROL_PADDING;n.zoomInProps.posY=o,n.zoomOutProps.posY=o+m._DEFAULT_ZOOM_CONTROL_DIAMETER+m._DEFAULT_ZOOM_CONTROL_SPACING,e.renderZoomControls(n),e.zoomin.setVisible("visible"),e.zoomout.setVisible("visible")}},v._renderEmptyText=function(e){if(e.Options.series)var i=e.Options.translations.labelInvalidData;else i=e.Options.translations.labelNoData;e.clearComponent(),e.renderEmptyText(e._canvas,i,new t.Rectangle(0,0,e._backgroundWidth,e._backgroundHeight),e.EventManager,m.getEmptyTextStyle(e.Options))},v._addLabel=function(e,i,s,r,n,a,o,l,h,_,c,d,g,u){var m=new t.OutputText(e,r,s,0,l);null!=o&&m.setCSSStyle(o);var p=m.getDimensions();if(a-=p.h,m.setY(a),u&&m.setX(s-p.w),h){var v=Math.min(p.w+2*d,n);if(u)S=s-v+2*d;else var S=s;var f=new t.Rect(e,S-d,a-d,v,p.h+2*d,"ob_"+l);f.setCSSStyle(_),f.setCornerRadius(3),f.setAlpha(c),i.addChild(f),g&&g.push(f)}return t.TextUtils.fitText(m,n,1/0,i),g&&g.push(m),m};var S=function(e){S.superclass.constructor.call(this,e)};t.Obj.createSubclass(S,i.TimeComponentEventManager),S.prototype.addListeners=function(e){if(S.superclass.addListeners.call(this,e),!t.Agent.isTouchDevice()&&("ie"===t.Agent.browser||"edge"===t.Agent.browser)){var i=this.getCtx().getStage();i.addEvtListener("mouseenter",this.OnMouseEnter,!1,this),i.addEvtListener("mouseleave",this.OnMouseLeave,!1,this)}},S.prototype.RemoveListeners=function(e){if(S.superclass.RemoveListeners.call(this,e),!t.Agent.isTouchDevice()&&("ie"===t.Agent.browser||"edge"===t.Agent.browser)){var i=this.getCtx().getStage();i.removeEvtListener("mouseenter",this.OnMouseEnter,!1,this),i.removeEvtListener("mouseleave",this.OnMouseLeave,!1,this)}},S.prototype.PreOnMouseOver=function(e){this._mouseOutTimer&&this._mouseOutTimer.isRunning()&&this._mouseOutTimer.stop(),S.superclass.PreOnMouseOver.call(this,e),"ie"===t.Agent.browser||"edge"===t.Agent.browser||this.isMouseOver||(this.isMouseOver=!0)},S.prototype.OnMouseEnter=function(e){this._mouseOutTimer&&this._mouseOutTimer.isRunning()&&this._mouseOutTimer.stop(),this.isMouseOver||(this.isMouseOver=!0)},S.prototype.OnMouseLeave=function(e){this._mouseOutTimer||(this._mouseOutTimer=new t.Timer(this.getCtx(),10,this._onMouseOutTimerEnd,this,1)),this._mouseOutTimer.reset(),this._mouseOutTimer.start()},S.prototype.PreOnMouseOut=function(e){S.superclass.PreOnMouseOut.call(this,e),"ie"!==t.Agent.browser&&"edge"!==t.Agent.browser&&(this._mouseOutTimer||(this._mouseOutTimer=new t.Timer(this.getCtx(),10,this._onMouseOutTimerEnd,this,1)),this._mouseOutTimer.reset(),this._mouseOutTimer.start())},S.prototype._onMouseOutTimerEnd=function(){this.isMouseOver=!1},S.prototype.prevPage=function(){var e=this._component;-1===e._prevArrowContainer.getClassName().indexOf("oj-timeline-nav-arrow-disabled")&&(e._discreteViewportCurrentIndexOffset--,e.handlePageChangeDiscreteViewport())},S.prototype.nextPage=function(){var e=this._component;-1===e._nextArrowContainer.getClassName().indexOf("oj-timeline-nav-arrow-disabled")&&(e._discreteViewportCurrentIndexOffset++,e.handlePageChangeDiscreteViewport())},S.prototype.handleArrowPress=function(e){var t=this.getFocus();return"prevNavArrow"===t._id?this.prevPage():"nextNavArrow"===t._id&&this.nextPage(),t},S.prototype.panBy=function(e,t){var i=this.getFocus();i&&(this._comp._dragPanSeries=i._series),S.superclass.panBy.call(this,e,t)};var f=function(){};t.Obj.createSubclass(f,t.Obj),f.prototype.parse=function(e){var t=new Object;t.start=new Date(e.start).getTime(),t.end=new Date(e.end).getTime(),e.viewportStart&&(t.viewStart=new Date(e.viewportStart).getTime()),e.viewportEnd&&(t.viewEnd=new Date(e.viewportEnd).getTime()),e.selectionMode?t.selectionMode=e.selectionMode:t.selectionMode="none",t.inlineStyle=e.style,e.svgStyle&&(t.inlineStyle=e.svgStyle);var i=e.minorAxis;if(i){var s=i.scale;t.scale=s,t.customFormatScales=i._cfs}var r=e.majorAxis;r&&(t.seriesScale=r.scale,t.seriesConverter=r.converter,t.seriesCustomFormatScales=r._cfs),t.shortDesc=e.shortDesc,t.orientation=e.orientation;var n=e.referenceObjects;if(n&&n.length>0){for(var a=[],o=0;o<n.length;o++)a.push(new Date(n[o].value));t.referenceObjects=a}var l=e.overview;return null!=l&&"on"===l.rendered?t.hasOverview=!0:t.hasOverview=!1,t.itemPosition=e._ip,t.customTimeScales=e._cts,t};var T=function(e,t){this.Init(e,t)};t.Obj.createSubclass(T,t.Container),T.ENABLED_STATE_KEY="en",T.SELECTED_STATE_KEY="sel",T.ACTIVE_SELECTED_STATE_KEY="asel",T.HOVER_STATE_KEY="hl",T.prototype.Init=function(e,t){T.superclass.Init.call(this,e,"g",t)},T.prototype.setSelected=function(e){this._isSelected!==e&&(this._isSelected=e,e?this._isShowingHoverEffect?this.applyState(T.ACTIVE_SELECTED_STATE_KEY):this.applyState(T.SELECTED_STATE_KEY):this.applyState(T.ENABLED_STATE_KEY))},T.prototype.showHoverEffect=function(e){this._isShowingHoverEffect||(this._isShowingHoverEffect=!0,this._isSelected&&e?this.applyState(T.ACTIVE_SELECTED_STATE_KEY):this._isSelected?this.applyState(T.SELECTED_STATE_KEY):this.applyState(T.HOVER_STATE_KEY))},T.prototype.hideHoverEffect=function(e){this._isSelected&&e?this.applyState(T.ACTIVE_SELECTED_STATE_KEY):this._isSelected?this.applyState(T.SELECTED_STATE_KEY):this.applyState(T.ENABLED_STATE_KEY),this._isShowingHoverEffect=!1},T.prototype.applyState=function(e){var i=this._node,s=i.getBubble();if(null!=s){var r=s.getChildAt(0),n=r.getChildAt(0),a=i.getDurationBar();if(e===T.ACTIVE_SELECTED_STATE_KEY)var o=m.getItemSelectedFillColor(i),l=m.getItemSelectedStrokeColor(i),h=m.getItemSelectedStrokeWidth(),_=m.getItemInnerActiveStrokeColor();else e===T.SELECTED_STATE_KEY?(o=m.getItemSelectedFillColor(i),l=m.getItemSelectedStrokeColor(i),h=m.getItemSelectedStrokeWidth(),_=m.getItemInnerStrokeColor()):e===T.HOVER_STATE_KEY?(o=m.getItemHoverFillColor(i),l=m.getItemHoverStrokeColor(i),h=m.getItemHoverStrokeWidth(i._timeline.Options),_=m.getItemInnerActiveStrokeColor()):(o=m.getItemFillColor(i),l=m.getItemStrokeColor(i),h=m.getItemStrokeWidth(),_=m.getItemInnerStrokeColor());var c=m.getItemInnerStrokeWidth(),d=new t.Stroke(l,1,h),g=new t.Stroke(_,1,c);if(r.setStroke(d),n.setStroke(g),e===T.HOVER_STATE_KEY){var u=i._timeline.Options.styleDefaults.series.backgroundColor;r.setSolidFill(u),n.setSolidFill(o)}else r.setSolidFill(o),n.setSolidFill(m.getItemInnerFillColor());var p=i.getFeeler();p&&p.setStroke(d),a&&a.setStroke(d)}};var b=new Object;t.Obj.createSubclass(b,t.Obj),b.renderItem=function(e,t,i,s,r,n){e._content?(b._renderBubble(e,t,i,r),b._displayBubble(e,t,s,null,!1)):(t._hasMvAnimations=!0,b._displayBubble(e,t,s,n,!0)),t.isVertical()||(e.getFeeler()&&t._allowUpdates?b._updateFeeler(e,t,s,n):b._renderFeeler(e,t,i.feelers,s,r))},b.initializeItem=function(e,t,i){e.getBubble()&&t._allowUpdates?b._updateBubble(e,t,i):b._createBubble(e,t,i)},b._createBubble=function(e,i,r){var n,a,l,h=i.getCtx(),_=t.Agent.isRightToLeft(h),c=Number(m.getBubblePadding(e._timeline.Options)),d=b._getBubbleContent(e,i);e._timeline.getOptions().itemBubbleContentRenderer?(n=Math.max(0,d._w+d._x+2*c),a=d._h+d._y+2*c):(n=d._w+2*c,a=d._h+2*c),e.setContentWidth(n);var g=e.getStartTime(),u=e.getEndTime(),p=s.TimeAxisUtils.getDatePosition(i._start,i._end,g,i._length),v=s.TimeAxisUtils.getDatePosition(i._start,i._end,u,i._length);e.getItemType()===o.DURATION_EVENT&&(n=(l=Math.max(v-p,m.getMinDurationEvent()))<n?l+n+m.getContentBubbleSpacing():l),b.checkEndViewportCollision(e,i,_,n),e.getEndViewportCollision()&&null===l&&(n=2*n+m.getContentBubbleSpacing()),e.setWidth(n),e.setHeight(a),e.setDurationWidth(l),e._content=d;var S=i.calculateSpacing(e,r);e.setSpacing(S)},b._renderBubble=function(e,i,r,n){var a,l,h,_,c,d,g,u=i.getCtx(),p=t.Agent.isRightToLeft(u),v=e.getId(),S=Number(m.getBubblePadding(e._timeline.Options)),f=Number(m.getBubbleRadius(e._timeline.Options)),y=e._content,E=b._isOverflow(e);e._content=null;var C=e.getWidth(),A=e.getContentWidth(),D=e.getDurationWidth(),O=e.getHeight(),w="_bubble_"+v;if("alta"===e._timeline.getCtx().getThemeBehavior()){if(i.isVertical()){var x=O/2,I=x-6,L=x+6;!p&&i.isInverted()||p&&!i.isInverted()?(c=[0,0,0,I,-6,x,0,L,0,O,C,O,C,0,0,0],d=[2,2,2,I,-4,x,2,L,2,O-2,C-2,O-2,C-2,2,2,2]):(c=[0,0,0,O,C,O,C,L,C+6,x,C,I,C,0,0,0],d=[2,2,2,O-2,C-2,O-2,C-2,L,C+4,x,C-2,I,C-2,2,2,2])}else I=(x=p?C-m.getBubbleOffset():m.getBubbleOffset())-6,L=x+6,i.isInverted()?(c=[0,0,I,0,x,-6,L,0,C,0,C,O,0,O,0,0],d=[2,2,I,2,x,-4,L,2,C-2,2,C-2,O-2,2,O-2,2,2]):(c=[0,0,0,O,I,O,x,O+6,L,O,C,O,C,0,0,0],d=[2,2,2,O-2,I,O-2,x,O+4,L,O-2,C-2,O-2,C-2,2,2,2]);a=new t.Polygon(u,c,w),l=new t.Polygon(u,d,w+"_i")}else{var k=m.getContentBubbleArrow();_=e.getEndViewportCollision(),g=p&&!_||!p&&_?[0,0,A,0,A,O/2-k,A+k,O/2,A,O/2+k,A,O,0,O,0,0]:[0,0,0,O/2-k,-k,O/2,0,O/2+k,0,O,A,O,A,0,0,0],(h=new t.Polygon(u,g,w+"_ct")).setSolidFill(m.getContentBubbleBackgroundColor(e._timeline.getOptions())),D&&(C=D),a=new t.Rect(u,0,0,C,O,w),l=new t.Rect(u,2,2,C-4,O-4,w+"_i"),a.setCornerRadius(f),l.setCornerRadius(f)}l.setSolidFill(m.getItemInnerFillColor()),a.addChild(l);var R=new T(u,"_bt_"+v);R._node=e,e.setBubble(R),e.setContentBubble(h),n&&(R.setAlpha(0),n.push(R));var M=b.calcPadding(e,p,S,C,E,y);if(E&&(e.getItemType()===o.DURATION_EVENT||e._timeline.isDiscreteNavigationMode())){_=e.getEndViewportCollision();var P=(M+15.5)*(p&&!_||!p&&_?-1:1);h.setTranslateX(P),h.addChild(y),y.setTranslate(S,S),R.addChild(a),R.addChild(h)}else{var V=e._timeline._viewStartTime>e.getEndTime()||e._timeline._viewEndTime<e.getStartTime();e._timeline.isDiscreteNavigationMode()&&V&&e.getItemType()===o.DURATION_EVENT&&y.setVisible(),y.setTranslate(M,S),a.addChild(y),R.addChild(a)}s.TimeAxisUtils.supportsTouch()&&t.ToolkitUtils.setAttrNullNS(R._elem,"id",R._id),R.applyState(T.ENABLED_STATE_KEY),R.setClassName("oj-timeline-item-bubble"),e.getLoc()>=0&&r.addChild(R),R.setAriaRole("img"),i._callbackObj.EventManager.associate(R,e)},b._displayBubble=function(e,i,s,r,n){var a,l,h=i.getCtx(),_=t.Agent.isRightToLeft(h),c=e.getLoc(),d=e.getWidth(),g=e.getHeight(),u=e.getSpacing(),p=e.getBubble();if(n&&p.applyState(T.ENABLED_STATE_KEY),i.isVertical())l=c-g/2,_&&i.isInverted()||!_&&!i.isInverted()?a=i._size-(d+i._initialSpacing)+s:(a=i._initialSpacing,s=0);else{var v=e.getItemType()===o.DURATION_EVENT?0:m.getBubbleOffset();_?(a=i._length-c-d+v,b._isOverflow(e)&&(a+=e.getContentWidth())):a=c-v,i.isInverted()?(l=i.isTopToBottom()?u:i.Height-u-g+s+i._initialSpacing-m.getBubbleSpacing(),s=0):l=i.isTopToBottom()?u-i._initialSpacing+m.getBubbleSpacing():i.Height-u-g+s}r?(i.isVertical()?p.setTranslateX(p.getTranslateX()+i._canvasOffsetX+s):p.setTranslateY(p.getTranslateY()+i._canvasOffsetY+s),r.addProp(t.Animator.TYPE_NUMBER,p,p.getTranslateX,p.setTranslateX,a),r.addProp(t.Animator.TYPE_NUMBER,p,p.getTranslateY,p.setTranslateY,l)):p.setTranslate(a,l),e._updateAriaLabel()},b._getBubbleContent=function(e,i){var s,r=i.getCtx(),n=t.Agent.isRightToLeft(r),a=e.getTitle(),o=e.getDescription(),l=e.getThumbnail(),h=new t.Container(r),_=0,c=0,d=0,g=0,u=0,p=e._timeline.getOptions().itemBubbleContentRenderer;if(p&&(s=p(e.getRendererContext()))){var v=h.getContainerElem();Array.isArray(s)?s.forEach(function(e){t.ToolkitUtils.appendChildElem(v,e)}):t.ToolkitUtils.appendChildElem(v,s);var S=i._blocks[i._blocks.length-1];S.setClassName("oj-timeline-item-bubble"),S.addChild(h);var f=h.getDimensions();return h._w=f.w,h._h=f.h,h._x=n?f.w+f.x:f.x,h._y=f.y,S.removeChild(h),h}if(n){if(a&&((C=new t.OutputText(r,a,0,0)).setCSSStyle(m.getItemTitleStyle(e)),_=(A=C.getDimensions()).w,c=u=A.h,h.addChild(C)),o){(D=new t.OutputText(r,o,0,c)).setCSSStyle(m.getItemDescriptionStyle(e));var T=(A=D.getDimensions()).w;0!==_&&T!==_?T>_?(C.setX(T-_),_=T):D.setX(_-T):_=T,u=c+A.h,h.addChild(D)}l&&(b=m.getThumbnailWidth(),y=m.getThumbnailHeight(),_=0===_?0:_+m.getItemContentSpacing(),(E=new t.Image(r,l,_,0,b,y,"_tn")).setMouseEnabled(!1),h.addChild(E),d=b,g=y),h._w=_+d}else{if(l){var b=m.getThumbnailWidth(),y=m.getThumbnailHeight(),E=new t.Image(r,l,0,0,b,y,"_tn");E.setMouseEnabled(!1),h.addChild(E),_=b+m.getItemContentSpacing(),g=y}if(a){var C=new t.OutputText(r,a,_,0);C.setCSSStyle(m.getItemTitleStyle(e));var A=C.getDimensions();d=A.w,c=u=A.h,h.addChild(C)}if(o){var D=new t.OutputText(r,o,_,c);D.setCSSStyle(m.getItemDescriptionStyle(e)),A=D.getDimensions(),d=Math.max(d,A.w),u=c+A.h,h.addChild(D)}h._w=0===d?Math.max(_-m.getItemContentSpacing(),0):_+d}return h._h=Math.max(g,u),h},b._updateBubble=function(e,t,i){e.getItemType()===o.DURATION_EVENT&&b._updateDurationEvent(e,t);var s=t.calculateSpacing(e,i);e.setSpacing(s)},b._renderFeeler=function(e,i,s,r,n){var a=i.getCtx(),l=t.Agent.isRightToLeft(a),h=e.getId(),_=e.getLoc(),c=e.getSpacing();if(e.getItemType()!==o.DURATION_EVENT){var d,g="_feeler_"+h,u=e.getItemType()===o.DURATION_BAR?e.getDurationSize():0;if(i.isInverted())p=u,v=i.isTopToBottom()?c:i.Height-c-e.getHeight()+r+i._initialSpacing-m.getBubbleSpacing();else{var p=i.Height+r-u;if(i.isTopToBottom())v=c-i._initialSpacing+m.getBubbleSpacing()+e.getHeight();else var v=i.Height-c+r}d=l?i._length-_:_;var S=new t.Line(a,d,p,d,v,g);n&&(S.setAlpha(0),n.push(S)),s.addChild(S);var f=m.getItemStrokeWidth(),T=m.getItemStrokeColor(e),b=new t.Stroke(T,1,f);S.setStroke(b),S._node=e,e.setFeeler(S)}else e.setFeeler(null)},b._updateFeeler=function(e,i,s,r){if(i.isVertical()||e.getItemType()===o.DURATION_EVENT)e.setFeeler(null);else{var n,a=i.getCtx(),l=t.Agent.isRightToLeft(a),h=e.getFeeler(),_=e.getItemType()===o.DURATION_BAR?e.getDurationSize():0;if(i.isInverted())c=_,d=i.isTopToBottom()?e.getSpacing():i.Height-e.getSpacing()-e.getHeight()+s+i._initialSpacing-m.getBubbleSpacing(),s=0;else{var c=i.Height+s-_;if(i.isTopToBottom())d=e.getSpacing()-i._initialSpacing+m.getBubbleSpacing()+e.getHeight();else var d=i.Height-e.getSpacing()+s}n=l?i._length-e.getLoc():e.getLoc(),r?(h.setY1(h.getY1()+i._canvasOffsetY+s),h.setY2(h.getY2()+i._canvasOffsetY+s),r.addProp(t.Animator.TYPE_NUMBER,h,h.getX1,h.setX1,n),r.addProp(t.Animator.TYPE_NUMBER,h,h.getY1,h.setY1,c),r.addProp(t.Animator.TYPE_NUMBER,h,h.getX2,h.setX2,n),r.addProp(t.Animator.TYPE_NUMBER,h,h.getY2,h.setY2,d)):(h.setX1(n),h.setY1(c),h.setX2(n),h.setY2(d))}},b.renderDuration=function(e,t,i,s,r,n){e.getDurationBar()?b._updateDuration(e,t,s,n):b._renderDuration(e,t,i,s,r)},b._renderDuration=function(e,i,r,n,a){var o=i.getCtx(),l=t.Agent.isRightToLeft(o),h=e.getStartTime(),_=e.getEndTime(),c=s.TimeAxisUtils.getDatePosition(i._start,i._end,h,i._length),d="_duration_"+e.getId(),g=22+10*e.getDurationLevel(),u=s.TimeAxisUtils.getDatePosition(i._start,i._end,_,i._length);if(i.isVertical()){if(!l&&!i.isInverted()||l&&i.isInverted())var p=new t.Rect(o,i._size-g+5,c,g,u-c,d);else p=new t.Rect(o,-5,c,g,u-c,d),n=0;p.setTranslateX(n),p.setY(c),p.setWidth(g),p.setHeight(u-c)}else{var v=u-c;if(l)S=i._length-c-v;else var S=c;i.isInverted()?(p=new t.Rect(o,S,-5,v,g,d)).setTranslateY(0):(p=new t.Rect(o,S,i._size-g+5,v,g,d)).setTranslateY(n)}a&&(p.setAlpha(0),a.push(p)),p.setCornerRadius(5),p.setSolidFill(e.getDurationFillColor());var f=m.getItemStrokeWidth(),T=m.getItemStrokeColor(e),b=new t.Stroke(T,1,f);p.setStroke(b),p._node=e,i._callbackObj.EventManager.associate(p,e),r.addChild(p),e.setDurationBar(p)},b._updateDuration=function(e,i,r,n){var a,o,l=i.getCtx(),h=t.Agent.isRightToLeft(l),_=e.getDurationBar();if(null!=_){a=s.TimeAxisUtils.getDatePosition(i._start,i._end,e.getStartTime(),i._length);var c=22+10*e.getDurationLevel();if(o=s.TimeAxisUtils.getDatePosition(i._start,i._end,e.getEndTime(),i._length),i.isVertical()){var d=0;if(!h&&!i.isInverted()||h&&i.isInverted())var g=i._size-c+5;else g=-5,r=0;var u=r,m=a,p=c,v=o-a}else{u=0;var S=o-a;g=h?i._length-a-S:a,i.isInverted()?(r=0,d=0,m=-5,p=S,v=c):(d=r,m=i._size-c+5,p=S,v=c)}n?(i.isVertical()?_.setTranslateX(_.getTranslateX()+i._canvasOffsetX+r):_.setTranslateY(_.getTranslateY()+i._canvasOffsetY+r),n.addProp(t.Animator.TYPE_NUMBER,_,_.getTranslateX,_.setTranslateX,u),n.addProp(t.Animator.TYPE_NUMBER,_,_.getTranslateY,_.setTranslateY,d),n.addProp(t.Animator.TYPE_NUMBER,_,_.getX,_.setX,g),n.addProp(t.Animator.TYPE_NUMBER,_,_.getY,_.setY,m),n.addProp(t.Animator.TYPE_NUMBER,_,_.getWidth,_.setWidth,p),n.addProp(t.Animator.TYPE_NUMBER,_,_.getHeight,_.setHeight,v)):(_.setTranslateX(u),_.setTranslateY(d),_.setX(g),_.setY(m),_.setWidth(p),_.setHeight(v))}},b._updateDurationEvent=function(e,i){var r,n,a,o=i.getCtx(),l=t.Agent.isRightToLeft(o),h=s.TimeAxisUtils.getDatePosition(i._start,i._end,e.getStartTime(),i._length),_=s.TimeAxisUtils.getDatePosition(i._start,i._end,e.getEndTime(),i._length),c=e.getBubble(),d=c.getChildAt(0),g=d.getChildAt(0),u=e.getContentBubble(),p=e.getContentWidth(),v=e.getHeight(),S=Math.max(_-h,m.getMinDurationEvent()),f=(p=e.getContentWidth(),m.getContentBubbleArrow()),T=e._timeline.isDiscreteNavigationMode();d.setWidth(S),g.setWidth(S-4);var y=e.getEndViewportCollision(),E=p<S?S:S+p;b.checkEndViewportCollision(e,i,l,E);var C=e.getEndViewportCollision(),A=l&&!C||!l&&C;if(y!==C&&(a=A?[0,0,p,0,p,v/2-f,p+f,v/2,p,v/2+f,p,v,0,v,0,0]:[0,0,0,v/2-f,-f,v/2,0,v/2+f,0,v,p,v,p,0,0,0],u.setPoints(a)),b._isOverflow(e)){r=S+p+m.getContentBubbleSpacing(),d.getNumChildren()>1&&(n=d.getChildAt(1),u.addChild(n),c.addChild(u));var D=Number(m.getBubblePadding(e._timeline.Options)),O=((w=b.calcPadding(e,l,D,S,!0,n))+15.5)*(A?-1:1);u.setTranslateX(O),T&&(n||(n=u.getChildAt(0)),n.setVisible("visible"))}else{r=S,u.getNumChildren()>0&&(n=u.getChildAt(0),d.addChild(n),c.removeChild(u));D=Number(m.getBubblePadding(e._timeline.Options));var w=b.calcPadding(e,l,D,S,!1,n);n||(n=d.getChildAt(1));var x=e._timeline._viewStartTime>e.getEndTime()||e._timeline._viewEndTime<e.getStartTime();T&&x?n.setVisible():(n.setVisible("visible"),n.setTranslateX(w))}e.setWidth(r),e.setDurationWidth(Math.max(S,m.getMinDurationEvent()))},b._isOverflow=function(e){var t=e.getContentWidth(),i=e.getDurationWidth(),r=e.getEndViewportCollision(),n=e._timeline.isDiscreteNavigationMode();if(e.getItemType()!==o.DURATION_EVENT)return!1;var a=e._timeline._viewStartTime>e.getEndTime()||e._timeline._viewEndTime<e.getStartTime();if(n&&a)return!1;if(n&&b.checkStartViewportCollision(e)){var l=s.TimeAxisUtils.getDatePosition(e._timeline._start,e._timeline._end,e._timeline._viewStartTime,e._timeline.getContentLength());i=s.TimeAxisUtils.getDatePosition(e._timeline._start,e._timeline._end,e.getEndTime(),e._timeline.getContentLength())-l}return!!(i<t||r)},b.calcPadding=function(e,t,i,r,n,a){var l=i,h=e._timeline.getOptions().itemBubbleContentRenderer;t&&h&&(l=r-i-2*a._x);var _=e.getEndViewportCollision();n&&((t&&!_||!t&&_)&&(r=e.getContentWidth()),l+=r-i);if(e._timeline.isDiscreteNavigationMode()&&!n&&e.getItemType()===o.DURATION_EVENT&&b.checkStartViewportCollision(e)){var c=s.TimeAxisUtils.getDatePosition(e._timeline._start,e._timeline._end,e._timeline._viewStartTime,e._timeline.getContentLength())-s.TimeAxisUtils.getDatePosition(e._timeline._start,e._timeline._end,e.getStartTime(),e._timeline.getContentLength());t?l+=c:l-=c}return l},b.checkStartViewportCollision=function(e){return e._timeline._viewStartTime>=e.getStartTime()&&e._timeline._viewStartTime<=e.getEndTime()},b.checkEndViewportCollision=function(e,t,i,r){var n,a=m.getNavButtonBackgroundWidth(),l=e.getStartTime(),h=s.TimeAxisUtils.getDatePosition(t._start,t._end,l,t._length),_=e._timeline.isDiscreteNavigationMode(),c=_?s.TimeAxisUtils.getDatePosition(t._start,t._end,e._timeline._viewEndTime,t._length):e._timeline._contentLength;if(e.setEndViewportCollision(!1),e.getItemType()===o.DURATION_EVENT){var d=m.getNavButtonBackgroundWidth()/2;if(i){n=t._length-h-r-m.getContentBubbleSpacing();var g=e._timeline._startPos;if(_){var u=s.TimeAxisUtils.getPositionDate(t._start,t._end,c+a,t._length);g=t._length+e._timeline.getDiscreteViewportPanningLength(t._start,u)+e._timeline._discreteOffset}g+d>n&&e.setEndViewportCollision(!0)}else(n=h+m.getContentBubbleSpacing()+r)>c+d&&e.setEndViewportCollision(!0)}};var y=function(e){this._context=e};t.Obj.createSubclass(y,t.Obj),y.prototype.parse=function(e,t){var i=this.buildData(e),s=new Object;return s.start=new Date(e.start).getTime(),s.end=new Date(e.end).getTime(),s.inlineStyle=e.style,e.svgStyle&&(s.inlineStyle=e.svgStyle),s.scale=e.scale,s.timeAxis=e.timeAxis,s.label=e.label,s.emptyText=e.emptyText,s.isIRAnimationEnabled="auto"===e.animationOnDisplay,s.isDCAnimationEnabled="auto"===e.animationOnDataChange,s.items=this._parseDataNode(e.timeline,e.index,i.data,t,s.start,s.end),s.rtl="false",s.isRandomItemLayout=e._isRandomItemLayout,s.customTimeScales=e._cts,s.customFormatScales=e._cfs,null==e.itemLayout||"auto"===e.itemLayout?s.isTopToBottom=e.inverted:s.isTopToBottom="topToBottom"===e.itemLayout,s.data=e._data,s},y.prototype.buildData=function(e){var t={},i=[],s=e.items;if(s)for(var r=0;r<s.length;r++){var n=s[r];i.push(n)}return t.data=i,t},y.prototype._parseDataNode=function(e,t,i,s,r,n){var a=[],l=e._series[t];if(i)for(var h=0;h<i.length;h++){var _=this.ParseNodeAttributes(i[h],r,n);if(_){if(l._allowUpdates){var c=this._findExistingItem(_,s);if(c){var d=s.indexOf(c);s.splice(d,1),c.setSpacing(null),c.setDurationLevel(null),c.setLoc(null),c.setSelected(!1),c.setStartTime(_.startTime),c.setEndTime(_.endTime),c.setStyle(_.style)}else(c=new o(e,t,_)).setSelectable(!0)}else(c=new o(e,t,_)).setSelectable(!0);for(var g=c.getStartTime(),u=!0,m=0;m<a.length;m++)if(g<a[m].getStartTime()){a.splice(m,0,c),u=!1;break}u&&a.push(c)}}return a},y.prototype._findExistingItem=function(e,i){if(i)for(var s=0;s<i.length;s++){var r=i[s];if(t.Obj.compareValues(this._context,e.id,r.getId())&&e.title===r.getTitle()&&e.desc===r.getDescription()&&e.thumbnail===r.getThumbnail())return r}return null},y.prototype.getDate=function(e){return null==e?null:e.getTime?e.getTime():isNaN(e)?new Date(e).getTime()+0:e},y.prototype.ParseNodeAttributes=function(e,t,i){var s=new Object;return s.id=e.id,s.rowKey=s.id,s.startTime=this.getDate(e.start),s.endTime=this.getDate(e.end),(s.endTime?s.endTime:s.startTime)<t||s.startTime>i?null:(s.title=e.title,s.desc=e.description,s.thumbnail=e.thumbnail,s.shortDesc=e.shortDesc,s.data=e,s.style=e.style,e.svgStyle&&(s.style=e.svgStyle),s.durationFillColor=e.durationFillColor,s.markerShape=e._markerShape,s.markerScaleX=e._markerScaleX,s.markerScaleY=e._markerScaleY,s.markerShortDesc=e._markerShortDesc,s.markerFillColor=e._markerFillColor,s.markerGradientFill=e._markerGradientFill,s.markerOpacity=e._markerOpacity,null==e._markerSD||e._markerSD?s.markerSD="true":s.markerSD="false",s.data=e,s)};var E=new Object;t.Obj.createSubclass(E,t.Obj),E.renderSeries=function(e,i,s){if(E._renderBackground(e,i,s),E._renderScrollableCanvas(e),E._renderReferenceObjects(e,e._canvas),E._renderSeriesTicks(e),null!=e._items){if(0===e._blocks.length){var r=e.getCtx(),n=new t.Container(r,"itemBlock_"+e._fetchStartPos+"_"+e._fetchEndPos);n.startPos=e._fetchStartPos,n.endPos=e._fetchEndPos;var a=new t.Container(r,"feelers");n.addChild(a),n.feelers=a;var o=new t.Container(r,"durations");n.addChild(o),n.durations=o,e._canvas.addChild(n),e._blocks.push(n)}else n=e._blocks[0];e.prepareDurations(e._items),e.prepareItems(e._items),e._isInitialRender?(e._isIRAnimationEnabled?e._frAnimationElems=[]:e._frAnimationElems=null,e._mvAnimator=null,e._rmAnimationElems=null):e._allowUpdates&&e._isDCAnimationEnabled?(e._frAnimationElems=[],e._mvAnimator=new t.Animator(e.getCtx(),m.getAnimationDuration(e.Options),0,t.Easing.cubicInOut),e._rmAnimationElems=[]):(e._frAnimationElems=null,e._mvAnimator=null,e._rmAnimationElems=null),e._hasMvAnimations=!1;var l=Math.max(0,e._maxOverflowValue-e._size);e._overflowOffset=l,E._adjustBackground(e,l),e._oldItems&&E._removeItems(e._oldItems,e,n,e._rmAnimationElems),e._oldItems=null,e.isVertical()&&n.feelers.removeChildren(),E._renderItems(e._items,e,n,e._fetchStartPos,e._fetchEndPos,l,e._frAnimationElems,e._mvAnimator),e._callbackObj.SelectionHandler&&n.setCursor(t.SelectionEffectUtils.getSelectingCursor()),E._updateReferenceObjects(e),E._updateSeriesTicks(e)}},E.updateSeriesForZoom=function(e){E._updateItemsForZoom(e._items,e),E._updateReferenceObjects(e),E._updateSeriesTicks(e)},E._renderBackground=function(e,i,s){if(e._background){var r=!1;e._background.setWidth(i),e._background.setHeight(s)}else r=!0,e._background=new t.Rect(e.getCtx(),0,0,i,s,"bg");e._background.setCSSStyle(e._style),e._background.setPixelHinting(!0),r&&e.addChild(e._background)},E._adjustBackground=function(e,i){var s=e.getCtx(),r=t.Agent.isRightToLeft(s);i>0&&(e.isVertical()?e._background.setWidth(e._maxOverflowValue):e._background.setHeight(e._maxOverflowValue)),e.isVertical()?(!e.isInverted()&&!r||e.isInverted()&&r)&&(e._background.setTranslateY(0),e._background.setTranslateX(-i),e.setHScrollPos(i)):e.isInverted()||(e._background.setTranslateX(0),e._background.setTranslateY(-i),e.setVScrollPos(i))},E._renderScrollableCanvas=function(e){if(e._canvas)return e._canvasOffsetX=e._canvas.getTranslateX(),e._canvasOffsetY=e._canvas.getTranslateY(),e._canvas.setTranslateX(e._offset),void e._canvas.setTranslateY(0);e._canvas=new t.Container(e.getCtx(),"canvas"),e._canvas.setTranslateX(e._offset),e.addChild(e._canvas)},E._renderItems=function(e,t,i,r,n,a,o,l){for(var h,_=0;_<e.length;_++){h=e[_];var c=s.TimeAxisUtils.getDatePosition(t._start,t._end,h.getStartTime(),t._length);c>=r&&c<=n&&b.renderItem(h,t,i,a,o,l)}if(s.TimeAxisUtils.supportsTouch())for(var d=0;d<e.length-1;d++){var g=(h=e[d]).getBubble();if(g){var u=e[d+1];if(!u.getBubble())break;g._setAriaProperty("flowto","_bt_"+u.getId())}}E._renderDurations(e,t,i,a,o,l)},E._updateItemsForZoom=function(e,t){var i,r;if(null!=e&&0!==e.length){var n=t._fetchStartPos,a=t._fetchEndPos,o=t._blocks[0];for(o.startPos=n,o.endPos=a,t.isVertical()?t._initialSpacing=20*(t._maxDurationSize>0?1:0)+m.getBubbleSpacing()+10*t._maxDurationSize:t._initialSpacing=20+m.getBubbleSpacing()+10*t._maxDurationSize,r=0;r<e.length;r++){var l=(i=e[r]).getStartTime(),h=s.TimeAxisUtils.getDatePosition(t._start,t._end,l,t._length),_=i.getEndTime();if(_&&_!==l){var c=s.TimeAxisUtils.getDatePosition(t._start,t._end,_,t._length)-h;h+=Math.min(m.getDurationFeelerOffset(),c/2)}i.setLoc(h),t._isRandomItemLayout||i.setSpacing(null)}for(r=0;r<e.length;r++){var d=(i=e[r]).getStartTime();d>=t._start&&d<=t._end&&b._updateBubble(i,t,r)}var g=Math.max(0,t._maxOverflowValue-t._size);for(E._adjustBackground(t,g),r=0;r<e.length;r++)i=e[r],b._displayBubble(i,t,g,null,!1),b._updateFeeler(i,t,g,null),b._updateDuration(i,t,g,null)}},E._renderDurations=function(e,t,i,s,r,n){for(var a=i.durations,l=t._maxDurationSize;l>0;l--)for(var h=0;h<e.length;h++){var _=e[h],c=_.getStartTime(),d=_.getEndTime();d&&d!==c&&l===_.getDurationLevel()&&_.getItemType()===o.DURATION_BAR&&b.renderDuration(_,t,a,s,r,n)}},E._renderSeriesTicks=function(e){if(null==e._seriesTicks?(e._seriesTicks=new t.Container(e.getCtx()),e._canvas.addChild(e._seriesTicks)):(e._seriesTicks.removeChildren(),e._seriesTicksArray=[]),e._scale&&e._timeAxis){var i=new t.CSSStyle(m.getSeriesAxisSeparatorStyle());if(e._axisStyleDefaults){var s=e._axisStyleDefaults.separatorColor;s&&i.parseInlineStyle("color:"+s+";")}e._separatorStroke=new t.Stroke(i.getStyle(t.CSSStyle.COLOR),1,1,!1,{dashArray:"3"}),E._renderSeriesTimeAxis(e,e._fetchStartPos,e._fetchEndPos,e._seriesTicks)}},E._updateSeriesTicks=function(e){for(var i=e.getCtx(),r=t.Agent.isRightToLeft(i),n=0;n<e._seriesTicksArray.length;n++){var a=e._seriesTicksArray[n];if(!e.isVertical()&&r)var o=e._length-s.TimeAxisUtils.getDatePosition(e._start,e._end,a.time,e._length);else o=s.TimeAxisUtils.getDatePosition(e._start,e._end,a.time,e._length);e.isVertical()?(a.setX1(0),a.setY1(o),a.setX2(e._maxOverflowValue),a.setY2(o)):(a.setX1(o),a.setY1(0),a.setX2(o),a.setY2(e._maxOverflowValue))}},E._renderSeriesTimeAxis=function(e,i,r,n){var a,o=e.getCtx(),l=t.Agent.isRightToLeft(o),h=e._start,_=e._end;if(e._customTimeScales&&e._customTimeScales[e._scale])a=e._customTimeScales[e._scale].times;else if(e._customFormatScales&&e._customFormatScales[e._scale]){a=e._customFormatScales[e._scale].times}else{a=[];var c=s.TimeAxisUtils.getPositionDate(h,_,i,e._length),d=e._timeAxis.adjustDate(c),g=s.TimeAxisUtils.getDatePosition(h,_,d,e._length);for(a.push(d.getTime());g<r;)d=e._timeAxis.getNextDate(d.getTime()),g=s.TimeAxisUtils.getDatePosition(h,_,d,e._length),a.push(d.getTime())}for(var u=0;u<a.length-1;u++){var m=a[u];if(g=s.TimeAxisUtils.getDatePosition(h,_,m,e._length),!e.isVertical()&&l)var p=e._length-g;else p=g;if(e.isVertical())var v=0,S=p,f=e._maxOverflowValue,T=p;else v=p,S=0,f=p,T=e._maxOverflowValue;var b=e.addTick(n,v,f,S,T,e._separatorStroke,"o_tick"+g);b.time=m,e._seriesTicksArray.push(b)}},E._renderReferenceObjects=function(e,i){var r=e.getCtx(),n=t.Agent.isRightToLeft(r);null==e._refObjectsContainer&&(e._refObjectsContainer=new t.Container(r),i.addChild(e._refObjectsContainer));var a=e._referenceObjects;if(a)for(var o=Math.min(1,a.length),l=0;l<o;l++){var h=a[l];if(h){var _=s.TimeAxisUtils.getDatePosition(e._start,e._end,h,e._length);if(0===e._renderedReferenceObjects.length){if(e.isVertical())var c=new t.Line(r,0,_,e._maxOverflowValue,_,"zoomOrder[i]");else n&&(_=e._length-_),c=new t.Line(r,_,0,_,e._maxOverflowValue,"zoomOrder[i]");var d=new t.Stroke(m.getReferenceObjectColor(e.Options));c.setStroke(d),c.setPixelHinting(!0),c.date=h,e._refObjectsContainer.addChild(c),e._renderedReferenceObjects[l]=c}else(c=e._renderedReferenceObjects[l]).date=h,_=s.TimeAxisUtils.getDatePosition(e._start,e._end,c.date,e._length),e.isVertical()?(c.setX1(0),c.setY1(_),c.setX2(e._maxOverflowValue),c.setY2(_)):(n&&(_=e._length-_),c.setX1(_),c.setY1(0),c.setX2(_),c.setY2(e._maxOverflowValue))}}else e._refObjectsContainer.removeChildren(),e._renderedReferenceObjects=[]},E._updateReferenceObjects=function(e){for(var i=e.getCtx(),r=t.Agent.isRightToLeft(i),n=0;n<e._renderedReferenceObjects.length;n++){var a=e._renderedReferenceObjects[n],o=s.TimeAxisUtils.getDatePosition(e._start,e._end,a.date,e._length);e.isVertical()?(a.setX1(0),a.setY1(o),a.setX2(e._maxOverflowValue),a.setY2(o)):(r&&(o=e._length-o),a.setX1(o),a.setY1(0),a.setX2(o),a.setY2(e._maxOverflowValue))}},E._removeItems=function(e,t,i,s){if(s)E._animateItemRemoval(e,t,s);else for(var r=0;r<e.length;r++){var n=e[r],a=n.getBubble();if(i.removeChild(a),!t.isVertical()){var o=i.feelers,l=n.getFeeler();o.removeChild(l)}var h=n.getStartTime(),_=n.getEndTime();if(_&&_!==h){var c=i.durations,d=n.getDurationBar();c.removeChild(d)}}},E._animateItemRemoval=function(e,t,i){for(var s=0;s<e.length;s++){var r=e[s],n=r.getBubble();if(t.isVertical()?n.setTranslateX(n.getTranslateX()+t._canvasOffsetX+t._overflowOffset):n.setTranslateY(n.getTranslateY()+t._canvasOffsetY+t._overflowOffset),i.push(n),!t.isVertical()){var a=r.getFeeler();a.setTranslateY(a.getTranslateY()+t._canvasOffsetY+t._overflowOffset),i.push(a)}var o=r.getStartTime(),l=r.getEndTime();if(l&&l!==o){var h=r.getDurationBar();t.isVertical()?h.setTranslateX(h.getTranslateX()+t._canvasOffsetX+t._overflowOffset):h.setTranslateY(h.getTranslateY()+t._canvasOffsetY+t._overflowOffset),i.push(h)}}};var C=function(e,t,i){this.Init(e,t,i)};t.Obj.createSubclass(C,t.BaseComponent),C.prototype.Init=function(e,t,i){C.superclass.Init.call(this,e),this._callback=t,this._callbackObj=i,this._blocks=[],this._renderedReferenceObjects=[],this._seriesTicksArray=[]},C.prototype.triggerAnimations=function(){var e=this.getCtx();if(this._rmAnimationElems&&0!==this._rmAnimationElems.length){this._callbackObj.EventManager.removeListeners(this._callbackObj);var i=new t.ParallelPlayable(e,new t.AnimFadeOut(e,this._rmAnimationElems,m.getAnimationDuration(this.Options)));t.Playable.appendOnEnd(i,this._onRmAnimationEnd,this),this._callbackObj.Animation=i,i.play()}else if(this._mvAnimator&&this._hasMvAnimations)this._callbackObj.EventManager.removeListeners(this._callbackObj),t.Playable.appendOnEnd(this._mvAnimator,this._onMvAnimationEnd,this),this._callbackObj.Animation=this._mvAnimator,this._mvAnimator.play();else if(this._frAnimationElems&&0!==this._frAnimationElems.length){this._callbackObj.EventManager.removeListeners(this._callbackObj);var s=new t.ParallelPlayable(e,new t.AnimFadeIn(e,this._frAnimationElems,m.getAnimationDuration(this.Options),(this._isInitialRender,0)));t.Playable.appendOnEnd(s,this._onAnimationEnd,this),this._callbackObj.Animation=s,s.play()}},C.prototype._onRmAnimationEnd=function(){for(var e=0;e<this._rmAnimationElems.length;e++){var i=this._rmAnimationElems[e],s=i.getParent();s&&s.removeChild(i)}this._mvAnimator&&this._hasMvAnimations?(this._callbackObj.Animation=this._mvAnimator,t.Playable.appendOnEnd(this._mvAnimator,this._onMvAnimationEnd,this),this._mvAnimator.play()):this._onMvAnimationEnd()},C.prototype._onMvAnimationEnd=function(){if(this._frAnimationElems&&0!==this._frAnimationElems.length){var e=new t.ParallelPlayable(this.getCtx(),new t.AnimFadeIn(this.getCtx(),this._frAnimationElems,m.getAnimationDuration(this.Options),(this._isInitialRender,0)));t.Playable.appendOnEnd(e,this._onAnimationEnd,this),this._callbackObj.Animation=e,e.play()}else this._onAnimationEnd()},C.prototype._onAnimationEnd=function(){this._callbackObj.onAnimationEnd()},C.prototype.render=function(e,i,r){if(e){this.SetOptions(e),this.Width?this._isInitialRender=!1:this._isInitialRender=!0,this.Width=i,this.Height=r;var n=this.Options.orientation;if(n&&n===s.TimeAxis.ORIENTATION_VERTICAL?(this._isVertical?this._allowUpdates=!0:this._allowUpdates=!1,this._isVertical=!0):(this._isVertical?this._allowUpdates=!1:this._allowUpdates=!0,this._isVertical=!1),this.Options){var a=this.Parse(this.Options);this._applyParsedProperties(a)}this._fetchStartPos=0,this._isVertical?(this._fetchEndPos=r,this._maxOverflowValue=i,this._length=r,this._size=i,this._offset=0):(this._maxOverflowValue=r,this._callbackObj.isDiscreteNavigationMode()?(this._offset=this._callbackObj._discreteOffset,this._length=i-2*this._offset,this._fetchEndPos=i-2*this._offset):(this._length=i,this._fetchEndPos=i,this._offset=0),this._size=r),this._isInverted=this.Options.inverted,this._colorCount=0,this._maxDurationSize=0,E.renderSeries(this,i,r),s.TimeAxisUtils.supportsTouch()&&this._items.length>0&&this._setAriaProperty("flowto","_bt_"+this._items[0].getId());var o=this.GetComponentDescription();o&&(t.ToolkitUtils.setAttrNullNS(this.getElem(),"role","img"),t.ToolkitUtils.setAttrNullNS(this.getElem(),"aria-label",t.AriaUtils.processAriaLabel(o)))}else this._handleResize(i,r)},C.prototype.GetComponentDescription=function(){var e=this.Options.translations,i=[e.labelSeries];return this._label?i.push(this._label):i.push(this.Options.index+1),t.ResourceUtils.format(e.labelAndValue,i)},C.prototype._handleResize=function(e,t){this._canvas.setTranslateY(0),this._callbackObj.isDiscreteNavigationMode()||this._canvas.setTranslateX(0),this.Width=e,this.Height=t,this._fetchStartPos=0,this._isVertical?(this._fetchEndPos=t,this._maxOverflowValue=e,this._length=t,this._size=e,this._offset=0):(this._maxOverflowValue=t,this._callbackObj.isDiscreteNavigationMode()?(this._offset=this._callbackObj._discreteOffset,this._length=e-2*this._offset,this._fetchEndPos=e-2*this._offset,this._canvas.setTranslateX(this._offset)):(this._length=e,this._fetchEndPos=e,this._offset=0),this._size=t),this._background.setWidth(e),this._background.setHeight(t),E.updateSeriesForZoom(this)},C.prototype.applyStyleValues=function(){if(this._style=new t.CSSStyle(m.getSeriesStyle()),this._seriesStyleDefaults=this.Options.seriesStyleDefaults,this._axisStyleDefaults=this.Options.axisStyleDefaults,this._colors=m.getColorsArray(this.Options),this._referenceObjects=this.Options.referenceObjects,this._seriesStyleDefaults){var e=this._seriesStyleDefaults.backgroundColor;e&&this._style.parseInlineStyle("background-color:"+e+";")}this._style.parseInlineStyle(this._inlineStyle)},C.prototype.SetOptions=function(e){this.Options=e},C.prototype.Parse=function(e){return this._parser=new y(this.getCtx()),this._parser.parse(e,this._items)},C.prototype._applyParsedProperties=function(e){this._items&&(this._oldItems=this._items),this._items=e.items,this._items&&this._items.length>0?this._isEmpty=!1:this._isEmpty=!0,this._isIRAnimationEnabled=e.isIRAnimationEnabled,this._isDCAnimationEnabled=e.isDCAnimationEnabled,this._label=e.label,this._timeAxis=e.timeAxis,this._emptyText=e.emptyText,null==this._emptyText&&(this._emptyText=this.Options.translations.labelNoData),this._isTopToBottom=e.isTopToBottom,this._isRandomItemLayout=e.isRandomItemLayout,this._customTimeScales=e.customTimeScales,this._customFormatScales=e.customFormatScales,this._start=e.start,this._end=e.end,this._inlineStyle=e.inlineStyle,this._scale=e.scale,this._converter=e.converter,this._data=e.data,this.applyStyleValues()},C.prototype.calculateSpacing=function(e,t){var i,s,r;if(null!=this._items&&0!==this._items.length){var n=this._maxOverflowValue,a=e.getSpacing();if(this._isRandomItemLayout){if(null==a){var o=e.getHeight(),l=this._initialSpacing,h=this._maxOverflowValue-o-l;h<0&&(h=0),a=Math.round(Math.random()*h)+l,this._maxOverflowValue<a+o&&(this._maxOverflowValue=a+o+m.getBubbleSpacing())}return a}if(null==a&&(a=this._initialSpacing),this._isVertical)for(i=0;i<t;i++)n<a+(r=(s=this._items[i]).getWidth()+10)&&(n=a+r);else{var _=e.getEndViewportCollision()?e.getContentWidth():0,c=e.getLoc()-_,d=e.getWidth()+16,g=m.getBubbleSpacing(),u=[];for(i=0;i<t;i++){r=(s=this._items[i]).getWidth()+16,_=s.getEndViewportCollision()?s.getContentWidth():0;var p=s.getLoc()-_;(c>=p&&c<=p+r||p>=c&&p<=c+d)&&u.push(s)}for(i=0;i<u.length;i++){for(var v=!1,S=0;S<u.length;S++){var f=(s=u[S]).getHeight(),T=s.getSpacing();if(a>=T&&a<=T+f){a=T+f+g,e.setSpacing(a),v=!0;break}}if(!v)break}n<a+f&&(n=a+f)}return n>this._maxOverflowValue&&(this._maxOverflowValue=n+m.getBubbleSpacing()),a}},C.prototype.calculateDurationSize=function(e,t){var i,s;if(null==this._items||0===this._items.length||"duration-bar"!==e.getItemType())return null;var r=e.getStartTime(),n=e.getEndTime();if(n&&n!==r){var a=e.getDurationLevel();null==a&&(a=1);var o=[];for(i=0;i<t;i++){var l=(s=this._items[i]).getStartTime(),h=s.getEndTime();h&&h!==l&&r>=l&&r<=h&&o.push(s)}for(i=0;i<o.length;i++){for(var _=!1,c=0;c<o.length;c++){var d=(s=o[c]).getDurationLevel();if(a===d){a=d+1,e.setDurationLevel(a),_=!0;break}}if(!_)break}return a>this._maxDurationSize&&(this._maxDurationSize=a),a}},C.prototype.prepareDurations=function(e){for(var t=0;t<this._items.length;t++){var i=this._items[t],s=i.getStartTime(),r=i.getEndTime();r&&r!==s&&(i.setDurationLevel(this.calculateDurationSize(i,t)),i.setDurationSize(22+10*i.getDurationLevel()-5),null==i.getDurationFillColor()&&(i.setDurationFillColor(this._colors[this._colorCount]),this._colorCount++,this._colorCount===this._colors.length&&(this._colorCount=0)))}},C.prototype.prepareItems=function(e){var t,i,r;for(this.isVertical()?this._initialSpacing=20*(this._maxDurationSize>0?1:0)+m.getBubbleSpacing()+10*this._maxDurationSize:this._initialSpacing=20+m.getBubbleSpacing()+10*this._maxDurationSize,t=0;t<e.length;t++){i=e[t],r=s.TimeAxisUtils.getDatePosition(this._start,this._end,i.getStartTime(),this._length);var n=i.getEndTime();if(n&&n!==i.getStartTime()){var a=s.TimeAxisUtils.getDatePosition(this._start,this._end,n,this._length)-r;i.getItemType()!==o.DURATION_EVENT&&(r+=Math.min(m.getDurationFeelerOffset(),a/2))}i.setLoc(r)}for(t=0;t<this._items.length;t++)i=this._items[t],(r=s.TimeAxisUtils.getDatePosition(this._start,this._end,i.getStartTime(),this._length))>=this._fetchStartPos&&r<=this._fetchEndPos&&b.initializeItem(i,this,t)},C.prototype.getData=function(e){if(e){var t={emptyText:this._data.emptyText,id:this._data.id,itemLayout:this._data.itemLayout,label:this._data.label,svgStyle:this._data.svgStyle,items:this._data.items};return i.TimeComponent.sanitizeData(t,"series")}return this._data},C.prototype.getLabel=function(){return this._label},C.prototype.getEmptyText=function(){return this._emptyText},C.prototype.findItem=function(e){if(null!=this._items)for(var i=0;i<this._items.length;i++){var s=this._items[i];if(t.Obj.compareValues(this.getCtx(),s.getId(),e))return s}return null},C.prototype.isInverted=function(){return this._isInverted},C.prototype.isTopToBottom=function(){return this._isTopToBottom},C.prototype.isVertical=function(){return this._isVertical},C.prototype.addTick=function(e,i,s,r,n,a,o){var l=new t.Line(this.getCtx(),i,r,s,n,o);return l.setStroke(a),l.setPixelHinting(!0),e.addChild(l),l},C.prototype.setVScrollPos=function(e){null!=this._canvas&&this._canvas.setTranslateY(0-e)},C.prototype.setHScrollPos=function(e){null!=this._canvas&&this._canvas.setTranslateX(this._offset-e)};const A=function(e,t,i){this.Init(e,t,i)};t.Obj.createSubclass(A,i.TimeComponent),A.newInstance=function(e,t,i){return new A(e,t,i)},A.prototype.Init=function(e,i,s){A.superclass.Init.call(this,e,i,s),this.Defaults=new h(e),this.EventManager=new S(this,e,i,s),this.EventManager.addListeners(this),t.Agent.isTouchDevice()?this._keyboardHandler=null:(this._keyboardHandler=new n(this.EventManager),this.EventManager.setKeyboardHandler(this._keyboardHandler))},A.prototype.Parse=function(e){return this._parser=new f,this._parser.parse(e)},A.prototype._applyParsedProperties=function(e){var i=this.Options.orientation;i&&i===s.TimeAxis.ORIENTATION_VERTICAL?this._isVertical=!0:this._isVertical=!1,this._viewportNavigationMode=this.Options.viewportNavigationMode,this._hasOverview=e.hasOverview,this._viewStartTime=e.viewStart,this._viewEndTime=e.viewEnd,this._initialViewportTimeDuration=this._viewEndTime-this._viewStartTime,this._selectionMode=e.selectionMode,"single"===this._selectionMode?this.SelectionHandler=new t.SelectionHandler(this.getCtx(),t.SelectionHandler.TYPE_SINGLE):"multiple"===this._selectionMode?this.SelectionHandler=new t.SelectionHandler(this.getCtx(),t.SelectionHandler.TYPE_MULTIPLE):this.SelectionHandler=null,this.EventManager.setSelectionHandler(this.SelectionHandler),this._shortDesc=e.shortDesc,this._referenceObjects=e.referenceObjects,this._seriesScale=e.seriesScale,this._seriesScale?(this._seriesConverter=e.seriesConverter,this._seriesTimeAxis=new s.TimeAxis(this.getCtx(),null,null),this._seriesTimeAxis.setIsVertical(this._isVertical),this._seriesTimeAxis.setScale(this._seriesScale),this._seriesTimeAxis.setConverter(this._seriesConverter),this._seriesCustomFormatScales=e.seriesCustomFormatScales,this._isVertical?this._seriesTimeAxis.setDefaultConverter(this._resources.converterVert):this._seriesTimeAxis.setDefaultConverter(this._resources.converter)):this._seriesTimeAxis=null,this._defaultInversions=[!1,!0],this._itemPosition=e.itemPosition,this._customTimeScales=e.customTimeScales,this._customFormatScales=e.customFormatScales,this._scale=e.scale,A.superclass._applyParsedProperties.call(this,e)},A.prototype.getTimeAxis=function(){return this._timeAxis},A.prototype.getTimeAxisSize=function(){return this._timeAxis.getSize()},A.prototype.getTimeAxisVisibleSize=function(e){return this._hasOverview||1!==e?this.getTimeAxisSize():this.getTimeAxisSize()-this._timeAxis.getBorderWidth()},A.prototype.select=function(e){this.Options.selection=t.JsonUtils.clone(e),this.SelectionHandler&&this.applyInitialSelections()},A.prototype._bundleTimeAxisOptions=function(e){if(this._timeAxisOptions={start:e.start,end:e.end,_resources:e._resources,shortDesc:e.shortDesc,_tzo:e._tzo,_ip:e._ip,_cts:this._customTimeScales,_cfs:this._customFormatScales,orientation:e.orientation},e.styleDefaults&&e.styleDefaults.minorAxis){var t=e.styleDefaults.minorAxis;this._timeAxisOptions.backgroundColor=t.backgroundColor,this._timeAxisOptions.borderColor=t.borderColor,this._timeAxisOptions.separatorColor=t.separatorColor,this._timeAxisOptions.labelStyle=t.labelStyle}if(e.minorAxis){var i=e.minorAxis;this._timeAxisOptions.scale=i.scale,this._timeAxisOptions.converter=i.converter,this._timeAxisOptions.zoomOrder=i.zoomOrder||[i.scale],this._timeAxisOptions._scaleLabelPosition={seconds:"center",minutes:"center",hours:"center",days:"center",weeks:"center",months:"center",quarters:"center",years:"center"};const t="alta"===this.getCtx().getThemeBehavior();this._timeAxisOptions._scaleLabelPosition=t?{seconds:"center",minutes:"center",hours:"center",days:"center",weeks:"center",months:"center",quarters:"center",years:"center"}:{seconds:"start",minutes:"start",hours:"start",days:"center",weeks:"start",months:"start",quarters:"start",years:"start"},this._timeAxisOptions.zoomOrder.forEach(e=>{if(e&&e.name){const t=e.labelPosition||"auto",i="auto"===t?"start":t;this._timeAxisOptions._scaleLabelPosition[e.name]=i}}),this._timeAxisOptions.style=i.style,i.svgStyle&&(this._timeAxisOptions.style=i.svgStyle)}},A.prototype.render=function(e,t,i){if(e){if(A.superclass.render.call(this,e,t,i),this.StopAnimation(),this._fetchStartPos=0,this._isVertical?this._fetchEndPos=i:this._fetchEndPos=t,this.Options.styleDefaults&&(this.Options.styleDefaults.item.descriptionStyle=m.convertToCSSStyle(this.Options.styleDefaults.item.descriptionStyle),this.Options.styleDefaults.item.titleStyle=m.convertToCSSStyle(this.Options.styleDefaults.item.titleStyle),this.Options.styleDefaults.majorAxis.labelStyle=m.convertToCSSStyle(this.Options.styleDefaults.majorAxis.labelStyle),this.Options.styleDefaults.minorAxis.labelStyle=m.convertToCSSStyle(this.Options.styleDefaults.minorAxis.labelStyle),this.Options.styleDefaults.overview.labelStyle=m.convertToCSSStyle(this.Options.styleDefaults.overview.labelStyle),this.Options.styleDefaults.series.emptyTextStyle=m.convertToCSSStyle(this.Options.styleDefaults.series.emptyTextStyle),this.Options.styleDefaults.series.labelStyle=m.convertToCSSStyle(this.Options.styleDefaults.series.labelStyle),this.Options.styleDefaults.tooltipLabelStyle=m.convertToCSSStyle(this.Options.styleDefaults.tooltipLabelStyle),this.Options.styleDefaults.tooltipValueStyle=m.convertToCSSStyle(this.Options.styleDefaults.tooltipValueStyle),this._majorAxisStyleDefaults=this.Options.styleDefaults.majorAxis,this._seriesStyleDefaults=this.Options.styleDefaults.series),this._scale){this._bundleTimeAxisOptions(this.Options),this.applyAxisStyleValues(),this._timeAxis||(this._timeAxis=new s.TimeAxis(this.getCtx(),null,null)),this._isVertical?this._timeAxis.setBorderVisibility(!1,!0,!1,!0):this._timeAxis.setBorderVisibility(!0,!1,!0,!1),this._timeAxis.setCanvasSize(null);var r=this._timeAxis.getPreferredLength(this._timeAxisOptions,this._canvasLength);r&&this.setContentLength(r),this._timeAxis.hasValidOptions()&&this.prepareViewportLength()}if(this.isDiscreteNavigationMode()){this._discreteViewportDatePositions=[this._viewStartTime,this._viewEndTime],this._discreteViewportStartIndex=0,this._discreteViewportCurrentIndexOffset=0;var n=m.getNavButtonBackgroundWidth();this._timeAxisRatio=(this._canvasLength-2*n)/this._canvasLength,this._discreteOffset=(this.getContentLength()-this.getContentLength()*this._timeAxisRatio)/2}this._populateSeries(),v.renderTimeline(this),this.isDiscreteNavigationMode()&&this.doInitialPan(),this.UpdateAriaAttributes(),s.TimeAxisUtils.supportsTouch()||this.getCtx().setKeyboardFocusArray([this]),this.Animation||this.RenderComplete()}else this._handleResize(t,i)},A.prototype.hasValidSeriesItems=function(){for(var e=0;e<this._seriesOptions.length;e++){var t=this._seriesOptions[e];if(t.items)for(var i=0;i<t.items.length;i++){var s=t.items[i],r=new Date(s.start).getTime();if(null==r||null==s.start)return!1;if(s.hasOwnProperty("end")){var n=new Date(s.end).getTime();if(!isNaN(n)&&n<r)return!1}}}return!0},A.prototype.hasValidOptions=function(){var e=this._scale&&(-1!==s.TimeAxis._VALID_SCALES.indexOf(this._scale)||this.isTimeComponentScale(this._scale)),t=this._scale&&this._customTimeScales&&this._customTimeScales[this._scale],i=this._start&&this._end&&this._end>this._start,r=this._series&&this._series.length>0,n=!!r&&this.hasValidSeriesItems(),a=!this._seriesScale||(-1!==s.TimeAxis._VALID_SCALES.indexOf(this._seriesScale)||this.isTimeComponentScale(this._seriesScale)),o=!this._seriesScale||this._customTimeScales&&this._customTimeScales[this._seriesScale],l=!this._viewStartTime||!this._viewEndTime||this._viewEndTime>this._viewStartTime,h=!this._viewStartTime||this._viewStartTime>=this._start&&this._viewStartTime<this._end,_=!this._viewEndTime||this._viewEndTime>this._start&&this._viewEndTime<=this._end;return(e||t)&&(a||o)&&i&&r&&n&&l&&h&&_},A.prototype.isTimeComponentScale=function(e){return null!=e.getNextDate&&null!=e.getPreviousDate&&null!=e.formatter&&null!=e.name},A.prototype.GetComponentDescription=function(){return this._shortDesc?this._shortDesc:this.Options.translations.componentName},A.prototype.applyStyleValues=function(){if(this._style=new t.CSSStyle(m.getTimelineStyle()),this.Options.styleDefaults){var e=this.Options.styleDefaults.borderColor;e&&this._style.parseInlineStyle("border-color:"+e+";")}if(this._hasOverview){this._overviewSize=this._isVertical?m.getOverviewWidth():m.getOverviewHeight();var i=this.Options.overview,s=i.svgStyle?i.svgStyle:i.style;if(s){var r=new t.CSSStyle(s),n=this._isVertical?r.getWidth():r.getHeight();null!=n&&(this._overviewSize=t.CSSStyle.toNumber(n))}}A.superclass.applyStyleValues.call(this);var a=this._style.getBorderWidth(),o=2*a,l="border:"+o+"px;";this._style.parseInlineStyle(l),this.setStartXOffset(a),this.setStartYOffset(a),this.setBackgroundXOffset(0);var h=3*this.getScrollbarPadding();this.timeDirScrollbarStyles=this.getTimeDirScrollbarStyle(),this.contentDirScrollbarStyles=this.getContentDirScrollbarStyle(),this._backgroundWidth=this.Width,this._backgroundHeight=this.Height,this._isVertical?(this.isContentDirScrollbarOn()&&(this._backgroundHeight=this._backgroundHeight-t.CSSStyle.toNumber(this.contentDirScrollbarStyles.getHeight())-h),this._canvasLength=this._backgroundHeight-o,this._hasOverview?(this._canvasSize=this._backgroundWidth-this._overviewSize-o,this.isRTL()&&this.setStartXOffset(a+this._overviewSize)):(this.isTimeDirScrollbarOn()&&(this._backgroundWidth=this._backgroundWidth-t.CSSStyle.toNumber(this.timeDirScrollbarStyles.getWidth())-h),this._canvasSize=this._backgroundWidth-o,this.isRTL()&&(this.setBackgroundXOffset(this.Width-this._backgroundWidth),this.setStartXOffset(this.getStartXOffset()+this.getBackgroundXOffset())))):(this.isContentDirScrollbarOn()&&(this._backgroundWidth=this._backgroundWidth-t.CSSStyle.toNumber(this.contentDirScrollbarStyles.getWidth())-h),this._canvasLength=this._backgroundWidth-o,this.isRTL()&&(this.setBackgroundXOffset(this.Width-this._backgroundWidth),this.setStartXOffset(this.getStartXOffset()+this.getBackgroundXOffset())),this._hasOverview?this._canvasSize=this._backgroundHeight-this._overviewSize-o:(this.isTimeDirScrollbarOn()&&(this._backgroundHeight=this._backgroundHeight-t.CSSStyle.toNumber(this.timeDirScrollbarStyles.getHeight())-h),this._canvasSize=this._backgroundHeight-o))},A.prototype.applyAxisStyleValues=function(){if(this._seriesStyleDefaults&&this._seriesStyleDefaults.backgroundColor){var e=this._seriesStyleDefaults.backgroundColor,i=t.ColorUtils.getRed(e),s=t.ColorUtils.getGreen(e),r=t.ColorUtils.getBlue(e);this._seriesBackgroundOverlayStyle="background-color:rgba("+i+","+s+","+r+",0.8);"}},A.prototype._populateSeries=function(){var e,t=this.Options.series;if(t){var i=Math.min(t.length,2);if(this._seriesOptions=[],this._series)if(i!==this._series.length){for(e=0;e<this._series.length;e++)this._timeZoomCanvas.removeChild(this._series[e]);this._series=[]}else for(e=0;e<this._series.length;e++)this._series[e]._items&&t[e].items&&this._series[e]._items[0]._data.itemType!==t[e].items[0].itemType&&(this._timeZoomCanvas.removeChild(this._series[e]),this._series[e]=null);else this._series=[];for(e=0;e<i;e++){var s=t[e];if(s.start=this._start,s.end=this._end,s.inverted=this._defaultInversions[e],s.orientation=this.Options.orientation,s.referenceObjects=this._referenceObjects,s.timeline=this,s.index=e,s.animationOnDisplay=this.Options.animationOnDisplay,s.animationOnDataChange=this.Options.animationOnDataChange,this.Options.majorAxis&&(s.scale=this.Options.majorAxis.scale,s.timeAxis=this._seriesTimeAxis,s._cfs=this._seriesCustomFormatScales),s.styleDefaults=this.Options.styleDefaults,this.Options.styleDefaults&&(s.seriesStyleDefaults=this._seriesStyleDefaults,s.axisStyleDefaults=this._majorAxisStyleDefaults),s._isRandomItemLayout="random"===this._itemPosition,s._cts=this.Options._cts,s._data=t[e],s.translations=this.Options.translations,this._seriesOptions.push(s),null==this._series[e]){var r=new C(this.getCtx(),this.HandleEvent,this);this._series[e]=r}}}else this._series=[]},A.prototype.onAnimationEnd=function(){this.AnimationStopped||this.RenderComplete(),this.EventManager.addListeners(this),this.Animation=null,this.AnimationStopped=!1},A.prototype._getOverviewObject=function(){var e=new Object;e.width=this._contentLength,e.selmode=this._selectionMode,e.rtl=this.isRTL(),e.sid="ts1";var t=m.getOverviewWindowBackgroundColor(this.Options);e._wbc=t,e._hfc=t;var i=m.getOverviewWindowBorderColor(this.Options);return e._wbtc=i,e._wbrc=i,e._wbbc=i,e._wblc=i,e._ls=m.getOverviewLabelStyle(this.Options).toString(),e._obc=m.getOverviewBackgroundColor(this.Options),e._ctic=m.getReferenceObjectColor(this.Options),this._referenceObjects&&this._referenceObjects.length>0&&this._referenceObjects[0]&&(e.ocd=this._referenceObjects[0].getTime()),this._isVertical?(e.orn="vertical",e.yMin=this._start,e.yMax=this._end,e.y1=this._viewStartTime,e.y2=this._viewEndTime):(e.orn="horizontal",e.xMin=this._start,e.xMax=this._end,e.x1=this._viewStartTime,e.x2=this._viewEndTime,e._ds="square",e._dsx="1.3d",e._dsy="0.9d"),this._resources.overviewHandleVert&&(e._vhbc=this._resources.overviewHandleVert,e._vhs=16),this._resources.overviewHandleHor&&(e._hbc=this._resources.overviewHandleHor,e._hs=16),e.axisTicks=this._getOverviewAxisOptions(),e.markers=this._getOverviewMarkerOptions(),e},A.prototype._getOverviewAxisOptions=function(){var e=[];if(this._seriesTimeAxis){var t,i;if(this._customTimeScales&&this._customTimeScales[this._seriesScale]){var r=this._customTimeScales[this._seriesScale];t=r.times,i=r.labels}else if(this._seriesCustomFormatScales&&this._seriesCustomFormatScales[this._seriesScale]){var n=this._seriesCustomFormatScales[this._seriesScale];t=n.times,i=n.labels}else{t=[],i=[];for(var a=this._start,o=this._end,l=this._isVertical?this.Height:this.Width,h=s.TimeAxisUtils.getPositionDate(a,o,this._fetchStartPos,l),_=this._seriesTimeAxis.adjustDate(h),c=s.TimeAxisUtils.getDatePosition(a,o,_,l);c<this._fetchEndPos;)i.push(this._seriesTimeAxis.formatDate(_)),t.push(_.getTime()),_=this._seriesTimeAxis.getNextDate(_.getTime()),c=s.TimeAxisUtils.getDatePosition(a,o,_,l)}for(var d=0;d<i.length;d++){var g=new Object;g.time=t[d],g.label=i[d],e.push(g)}}return e},A.prototype._getOverviewMarkerOptions=function(){if(this._series){for(var e=[],t=this._series.length,i=0;i<t;i++)for(var s=this._series[i]._items,r=0;r<s.length;r++){var n=s[r],a=new Object;a.rk=r,a.sid=i,a.tid=n.getId(),a.t=n.getStartTime(),a._sd=n.getMarkerSD(),this._isVertical||(n.getMarkerShape()&&(a.s=n.getMarkerShape()),n.getMarkerScaleX()&&(a.sx=n.getMarkerScaleX()),n.getMarkerScaleY()&&(a.sy=n.getMarkerScaleY())),n.getMarkerShortDesc()&&(a.d=n.getMarkerShortDesc()),n.getMarkerFillColor()&&(a.c=n.getMarkerFillColor()),n.getMarkerGradientFill()&&(a.g=n.getMarkerGradientFill()),n.getMarkerOpacity()&&(a.o=n.getMarkerOpacity());var l=n.getEndTime();if(l){a.et=l;var h=n.getDurationFillColor();h&&n.getItemType()===o.DURATION_BAR&&(a.dfc=h)}e.push(a)}return e}},A.prototype.createViewportChangeEvent=function(){var e=this._timeAxis.getScale();return"string"!=typeof e&&(e=e.name),t.EventFactory.newTimelineViewportChangeEvent(this._viewStartTime,this._viewEndTime,e)},A.prototype.HandleTouchStart=function(e){var t=e.touches,i=e.target.getClassName();1!==t.length||i||(this._dragPanSeries=this._findSeries(e.target))},A.prototype.HandleMouseWheel=function(e){if(A.superclass.HandleMouseWheel.call(this,e),this.hasValidOptions()&&!this.isDiscreteNavigationMode()&&e.zoomWheelDelta){var t=this.getCtx().pageToStageCoords(e.pageX,e.pageY);if(this.getGraphicalAreaBounds().containsPoint(t.x,t.y)){var i=this.getContentLength()*e.zoomWheelDelta,s=e.zoomTime,r=e.zoomCompLoc;this.handleZoomWheel(i,s,r,!0)}}},A.prototype.handleZoomWheel=function(e,t,i,s){var r;e>this._timeAxis.getMaxContentLength()?(e=this._timeAxis.getMaxContentLength(),this.disableZoomButton(!0)):this.enableZoomButton(!0),this._canvasLength>e?(e=this._canvasLength,this.disableZoomButton(!1)):this.enableZoomButton(!1);var n=this.getContentLength()<=e;A.superclass.handleZoomWheel.call(this,e,t,i,s);var a=this._timeAxis.getZoomLevelLengths();if(n)for(;this._timeAxis.getZoomLevelOrder()>0&&(r=a[this._timeAxis.getZoomLevelOrder()-1],this.getContentLength()>=r);)this._timeAxis.setZoomLevelOrder(this._timeAxis.getZoomLevelOrder()-1),this._timeAxis.decreaseScale();else for(;this._timeAxis.getZoomLevelOrder()<a.length-1&&(r=a[this._timeAxis.getZoomLevelOrder()],this.getContentLength()<r);)this._timeAxis.setZoomLevelOrder(this._timeAxis.getZoomLevelOrder()+1),this._timeAxis.increaseScale();if(this._hasOverview&&(this._isVertical?this._overview.setViewportRange(null,null,this._viewStartTime,this._viewEndTime):this._overview.setViewportRange(this._viewStartTime,this._viewEndTime,null,null)),this.isTimeDirScrollbarOn()&&this.timeDirScrollbar.setViewportRange(this._viewStartTime,this._viewEndTime),this.applyAxisStyleValues(),v._renderAxis(this,this._timeZoomCanvas,!0),this.updateSeries(),this.isContentDirScrollbarOn())for(var o=0;o<this._series.length;o++)this.contentDirScrollbar[o].setViewportRange(0,this._seriesSize,0,Math.max(this._series[o]._maxOverflowValue,this._seriesSize));s&&this.dispatchEvent(this.createViewportChangeEvent())},A.prototype.updateSeries=function(){if(this._series){var e=this._series.length,i=this.getTimeAxisVisibleSize(e);this._seriesSize=(this._canvasSize-i)/e;for(var s=0;s<e;s++){var r=this._series[s];r.setClipPath(null);var n=new t.ClipPath;if(this._isVertical){if(this.isRTL())var a=Math.abs(s-1);else a=s;if(this.isRTL()&&1===this._series.length){n.addRect(i,0,this._seriesSize,this.getContentLength());var o=new t.Matrix(1,0,0,1,i,0)}else n.addRect(a*(this._seriesSize+i),0,this._seriesSize,this.getContentLength()),o=new t.Matrix(1,0,0,1,a*(this._seriesSize+i),0);var l=this._seriesSize,h=this.getContentLength()}else n.addRect(0,s*(this._seriesSize+i),this.getContentLength(),this._seriesSize),o=new t.Matrix(1,0,0,1,0,s*(this._seriesSize+i)),l=this.getContentLength(),h=this._seriesSize;r.setClipPath(n),r.setMatrix(o),r.render(null,l,h)}}},A.prototype._handleResize=function(e,t){if(this.Width=e,this.Height=t,this.applyStyleValues(),this._fetchStartPos=0,this._isVertical?this._fetchEndPos=t:this._fetchEndPos=e,this.prepareViewportLength(),v._renderBackground(this),this.isDiscreteNavigationMode()){var i=m.getNavButtonBackgroundWidth();this._timeAxisRatio=(this._canvasLength-2*i)/this._canvasLength,this._discreteOffset=(this.getContentLength()-this.getContentLength()*this._timeAxisRatio)/2}if(this.hasValidOptions()){if(this.renderTimeZoomCanvas(this._canvas),this.applyAxisStyleValues(),this.updateSeries(),v._renderAxis(this,this._timeZoomCanvas),v._renderSeriesLabels(this),v._renderZoomControls(this),this.isDiscreteNavigationMode()&&(v._renderNavigationArrows(this,this._timeZoomCanvas),this.doInitialPan()),this._hasOverview&&(v._renderOverview(this),this.SelectionHandler)){var s=this.SelectionHandler.getSelectedIds();if(s&&0!==s.length)for(var r=0;r<s.length;r++)this._overview.selSelectItem(s[r])}(this.isTimeDirScrollbarOn()||this.isContentDirScrollbarOn())&&v._renderScrollbars(this)}else v._renderEmptyText(this);this.Animation||this.RenderComplete()},A.prototype.HandleKeyDown=function(e){t.KeyboardEvent.RIGHT_ARROW!==e.keyCode&&t.KeyboardEvent.LEFT_ARROW!==e.keyCode&&t.KeyboardEvent.DOWN_ARROW!==e.keyCode&&t.KeyboardEvent.UP_ARROW!==e.keyCode||this.updateScrollForItemNavigation(this.EventManager.getFocus())},A.prototype.HandleMouseDown=function(e){e.target.getClassName()||(this._dragPanSeries=this._findSeries(e.target))},A.prototype.endDragPan=function(){this._dragPanSeries=null,this.endPan()},A.prototype.endPan=function(){this._triggerViewportChange&&(this._triggerViewportChange=!1,this.dispatchEvent(this.createViewportChangeEvent()))},A.prototype.panBy=function(e,t){var i,s=this._series.length,r=this.getTimeAxisVisibleSize(s);if(this._isVertical){if(this._dragPanSeries){var n=this._dragPanSeries.getTranslateX()-e;if(this._series.length>1&&(!this.isRTL()&&this._dragPanSeries._isInverted||this.isRTL()&&!this._dragPanSeries._isInverted))var a=r+2*this._dragPanSeries.Width-this._dragPanSeries._maxOverflowValue,o=this._dragPanSeries.Width+r;else this.isRTL()&&!this._dragPanSeries._isInverted?(a=this._dragPanSeries.Width-this._dragPanSeries._maxOverflowValue+r,o=r):(a=0,o=this._dragPanSeries._maxOverflowValue-this._dragPanSeries.Width);n<a?n=a:n>o&&(n=o),this._dragPanSeries.setTranslateX(n),this.isContentDirScrollbarOn()&&(this._series[0]===this._dragPanSeries?this.isRTL()?(i=2===s?this.getTimeAxisVisibleSize()+this._seriesSize-n:this.getTimeAxisVisibleSize()-n,this.contentDirScrollbar[0].setViewportRange(i,i+this._seriesSize)):this.contentDirScrollbar[0].setViewportRange(n,n+this._seriesSize):this.isRTL()?this.contentDirScrollbar[1].setViewportRange(n,n+this._seriesSize):(i=this.getTimeAxisVisibleSize()+this._seriesSize-n,this.contentDirScrollbar[1].setViewportRange(i,i+this._seriesSize)))}this.panZoomCanvasBy(t),this._hasOverview&&this._overview.setViewportRange(null,null,this._viewStartTime,this._viewEndTime),this.isTimeDirScrollbarOn()&&this.timeDirScrollbar.setViewportRange(this._viewStartTime,this._viewEndTime),v._renderAxis(this,this._timeZoomCanvas,!0)}else if(this.isDiscreteNavigationMode()||(this.panZoomCanvasBy(e),this._hasOverview&&this._overview.setViewportRange(this._viewStartTime,this._viewEndTime,null,null),this.isTimeDirScrollbarOn()&&this.timeDirScrollbar.setViewportRange(this._viewStartTime,this._viewEndTime),v._renderAxis(this,this._timeZoomCanvas,!0)),this._dragPanSeries){var l=this._dragPanSeries.getTranslateY()-t;if(this._dragPanSeries._isInverted)var h=r+2*this._dragPanSeries.Height-this._dragPanSeries._maxOverflowValue,_=this._dragPanSeries.Height+r;else h=0,_=this._dragPanSeries._maxOverflowValue-this._dragPanSeries.Height;l<h?l=h:l>_&&(l=_),this._dragPanSeries.setTranslateY(l),this.isContentDirScrollbarOn()&&(this._series[0]===this._dragPanSeries?this.contentDirScrollbar[0].setViewportRange(l,l+this._seriesSize):(i=this.getTimeAxisVisibleSize()+this._seriesSize-l,this.contentDirScrollbar[1].setViewportRange(i,i+this._seriesSize)))}},A.prototype.HandleEvent=function(e,i){var s,r,n,a,o,l,h,_,c,d=e.type;if("dvtSimpleScrollbar"===d)e=this.processScrollbarEvent(e,i);else if("selection"===d)this.dispatchEvent(e);else if("overview"===d){if("rangeChanging"===(a=e.subtype)||"rangeChange"===a){var g=this._viewEndTime-this._viewStartTime;this._isVertical?(this._viewStartTime=e.newY1,this._viewEndTime=e.newY2):(this._viewStartTime=e.newX1,this._viewEndTime=e.newX2);var u=this._viewEndTime-this._viewStartTime;if(u>0){n=this._canvasLength/u,this.setContentLength(n*(this._end-this._start)),this.setRelativeStartPos(n*(this._start-this._viewStartTime));var m=this._timeAxis.getZoomLevelLengths();if(g>u){for(r=m[(s=m.length)-1];this.getContentLength()>=r&&s>0;)r=m[--s-1];s===m.length&&s--,this._timeAxis.setZoomLevelOrder(s),this._timeAxis.setScale(this._timeAxis.getZoomOrder()[s])}else{for(r=m[s=0];this.getContentLength()<r&&s<m.length-1;)r=m[++s];this._timeAxis.setZoomLevelOrder(s),this._timeAxis.setScale(this._timeAxis.getZoomOrder()[s])}this.applyAxisStyleValues(),v._renderAxis(this,this._timeZoomCanvas,!0),this.updateSeries(),this.applyTimeZoomCanvasPosition()}"rangeChange"===a&&this.dispatchEvent(this.createViewportChangeEvent())}"scrollPos"!==a&&"scrollTime"!==a||(this._isVertical?(this._viewStartTime=e.newY1,this._viewEndTime=e.newY2):(this._viewStartTime=e.newX1,this._viewEndTime=e.newX2),n=this.getContentLength()/(this._end-this._start),this.setRelativeStartPos(n*(this._start-this._viewStartTime)),this.applyTimeZoomCanvasPosition(),v._renderAxis(this,this._timeZoomCanvas,!0),this.dispatchEvent(this.createViewportChangeEvent()))}else if("timeline"===d)if("selection"===(a=e.subtype)){var p=e.itemId,S=e.isMultiSelect&&"multiple"===this._selectionMode;for(o=0;o<this._series.length;o++)for(h=this._series[o],l=0;l<h._items.length;l++)if(_=h._items[l],t.Obj.compareValues(this.getCtx(),_.getId(),p)){this.EventManager.setFocusObj(_),this.updateScrollForItemSelection(_),this.SelectionHandler._addToSelection(_,S)&&this.EventManager.fireSelectionEvent(_);break}}else if("highlight"===a){for(c=e.itemId,o=0;o<this._series.length;o++)for(h=this._series[o],l=0;l<h._items.length;l++)if(_=h._items[l],t.Obj.compareValues(this.getCtx(),_.getId(),c)){_.showHoverEffect(!0);break}}else if("unhighlight"===a)for(c=e.itemId,o=0;o<this._series.length;o++)for(h=this._series[o],l=0;l<h._items.length;l++)if(_=h._items[l],t.Obj.compareValues(this.getCtx(),_.getId(),c)){_.hideHoverEffect(!0);break}},A.prototype.processScrollbarEvent=function(e,t){A.superclass.processScrollbarEvent.call(this,e,t),t===this.timeDirScrollbar&&v._renderAxis(this,this._timeZoomCanvas,!0);var i=e.newMin;t===this.contentDirScrollbar[0]?this.isVertical()?2===this._series.length?this._series[0].setTranslateX(this.isRTL()?this.getTimeAxisVisibleSize()+this._seriesSize-i:i):this._series[0].setTranslateX(this.isRTL()?this.getTimeAxisVisibleSize()-i:i):this._series[0].setTranslateY(i):t===this.contentDirScrollbar[1]&&(this.isVertical()?this._series[1].setTranslateX(this.isRTL()?i:this.getTimeAxisVisibleSize()+this._seriesSize-i):this._series[1].setTranslateY(this.getTimeAxisVisibleSize()+this._seriesSize-i))},A.prototype.discreteScrollIntoViewport=function(e){if(this.isDiscreteNavigationMode()){var t=e.getStartTime(),i=Math.floor((t-this._viewStartTime)/this._initialViewportTimeDuration);0!==i&&(this._discreteViewportCurrentIndexOffset+=i,this.handlePageChangeDiscreteViewport())}},A.prototype.updateScrollForItemSelection=function(e){if(this.isDiscreteNavigationMode())this.discreteScrollIntoViewport(e);else{var t=this._viewEndTime-this._viewStartTime;this._viewStartTime=e.getStartTime()-t/2,this._viewStartTime<this._start?this._viewStartTime=this._start:this._viewStartTime+t>this._end&&(this._viewStartTime=this._end-t),this._viewEndTime=this._viewStartTime+t;var i=this.getContentLength()/(this._end-this._start);this.setRelativeStartPos(i*(this._start-this._viewStartTime)),this.applyTimeZoomCanvasPosition(),v._renderAxis(this,this._timeZoomCanvas),this.dispatchEvent(this.createViewportChangeEvent())}},A.prototype.updateScrollForItemNavigation=function(e){if(e instanceof o)if(this.isDiscreteNavigationMode())this.discreteScrollIntoViewport(e);else{var t=this._isVertical?e.getHeight():e.getWidth(),i=m.getItemHoverStrokeWidth(e._timeline.Options),s=e.getLoc()-(this._isVertical?t/2+i:m.getBubbleOffset()+i),r=this.getRelativeStartPos();this.isRTL()&&!this._isVertical&&(s-=i);var n=s+t+2*i,a=r-this._canvasLength;-s>r?r=-s:-n<a&&(r=-n+this._canvasLength);var l=this.getContentLength()/(this._end-this._start),h=this._viewEndTime-this._viewStartTime;this._viewStartTime=this._start-r/l,this._viewStartTime<this._start&&(this._viewStartTime=this._start,r=(this._start-this._viewStartTime)*l),this._viewEndTime=this._viewStartTime+h,this._viewEndTime>this._end&&(this._viewEndTime=this._end,this._viewStartTime=this._viewEndTime-h,r=(this._start-this._viewStartTime)*l),this.setRelativeStartPos(r),this.applyTimeZoomCanvasPosition(),this._hasOverview&&(this._isVertical?this._overview.setViewportRange(null,null,this._viewStartTime,this._viewEndTime):this._overview.setViewportRange(this._viewStartTime,this._viewEndTime,null,null)),this.isTimeDirScrollbarOn()&&this.timeDirScrollbar.setViewportRange(this._viewStartTime,this._viewEndTime),v._renderAxis(this,this._timeZoomCanvas),this.dispatchEvent(this.createViewportChangeEvent())}},A.prototype.applyInitialSelections=function(){if(this.Options.selection)for(var e=[],t=0;t<this._series.length;t++)for(var i=this._series[t],s=0;s<i._items.length;s++)e.push(i._items[s]);this.SelectionHandler.processInitialSelections(this.Options.selection,e)},A.prototype._findSeries=function(e){if(this.hasValidOptions()&&e&&e!==this){var t=e.getId();return e===this._series[0]||this._series.length>1&&e===this._series[1]?e:t&&"_s0"===t.substring(t.length-3,t.length)?this._series[0]:t&&"_s1"===t.substring(t.length-3,t.length)?this._series[1]:this._findSeries(e.getParent())}return null},A.prototype._findDrawable=function(e){if(e){var t=e.getId();if(t&&"_duration_"===t.substring(0,10)&&e._node)return e;var i=e.getParent();if(i){if(t&&"zoom"===t.substring(0,4))return e;if(t&&"_bubble_"===t.substring(0,8)&&i._node)return i;var s=i.getParent();if(s){if(t&&"_bubble_"===t.substring(0,8)&&s._node)return s;if((t=s.getId())&&"_bubble_"===t.substring(0,8)&&s.getParent())return s.getParent()}}}return null},A.prototype.getAutomation=function(){return this.Automation||(this.Automation=new l(this)),this.Automation},A.prototype.clearComponent=function(){A.superclass.clearComponent.call(this),this.clearOverview()},A.prototype.clearOverview=function(){this._overviewCanvas&&(this.removeChild(this._overviewCanvas),this._overviewCanvas=null)},A.prototype.isTimeDirScrollbarOn=function(){return!this._hasOverview&&!this.isDiscreteNavigationMode()},A.prototype.isContentDirScrollbarOn=function(){return!0},A.prototype.isDiscreteNavigationMode=function(){return"discrete"===this._viewportNavigationMode&&"redwood"===this.getCtx().getThemeBehavior()&&!this.isVertical()},A.prototype.getBackgroundXOffset=function(){return this._backgroundX},A.prototype.setBackgroundXOffset=function(e){this._backgroundX=e},A.prototype.getDiscreteViewportDatePosition=function(e){var t,i,s=this._discreteViewportStartIndex+e;if(s<0)for(t=this._discreteViewportDatePositions[0],i=this._discreteViewportDatePositions[1];s<0;){var r=this.getClosestDate(t-this._initialViewportTimeDuration);this._discreteViewportDatePositions.unshift(r),i=t,t=r,this._discreteViewportStartIndex++,s++}else if(s>this._discreteViewportDatePositions.length-2)for(t=this._discreteViewportDatePositions[this._discreteViewportDatePositions.length-2],i=this._discreteViewportDatePositions[this._discreteViewportDatePositions.length-1];s>this._discreteViewportDatePositions.length-2;){var n=this.getClosestDate(i+this._initialViewportTimeDuration);this._discreteViewportDatePositions.push(n),t=i,i=n}else t=this._discreteViewportDatePositions[s],i=this._discreteViewportDatePositions[s+1];return{startDate:t,endDate:i}},A.prototype.getClosestDate=function(e){var t=(e,t)=>{var i=this._timeAxis.adjustDate(e,t),s=this._timeAxis.getNextDate(i,t);return Date.parse(e-i>s-e?s:i)},i=t(e),s=t(e,this.Options.majorAxis.scale);if(null!=s)return Math.abs(e-i)>Math.abs(e-s)?s:i},A.prototype.getDiscreteViewportPanningLength=function(e,i){var r=this.getCtx(),n=t.Agent.isRightToLeft(r),a=this.getContentLength()*this._timeAxisRatio,o=s.TimeAxisUtils.getDatePosition(this._start,this._end,e,a);return(s.TimeAxisUtils.getDatePosition(this._start,this._end,i,a)-o)*(n?-1:1)},A.prototype.updateDiscreteViewport=function(){v._renderAxis(this,this.getTimeZoomCanvas(),!0),v._renderNavigationArrows(this,this.getTimeZoomCanvas()),this._hasOverview&&v._renderOverview(this),this.updateSeries()},A.prototype.handlePageChangeDiscreteViewport=function(){var e=this.getDiscreteViewportDatePosition(this._discreteViewportCurrentIndexOffset),t=this.getDiscreteViewportPanningLength(this._viewStartTime,e.startDate);this.panZoomCanvasBy(t),this._viewStartTime=e.startDate,this._viewEndTime=e.endDate,this.updateDiscreteViewport(),this.dispatchEvent(this.createViewportChangeEvent())},A.prototype.doInitialPan=function(){var e=this.getCtx(),i=t.Agent.isRightToLeft(e),r=this._viewStartTime,n=this._viewEndTime,a=this.getContentLength()*this._timeAxisRatio,o=m.getNavButtonBackgroundWidth(),l=s.TimeAxisUtils.getDatePosition(this._start,this._end,this._viewStartTime,a),h=s.TimeAxisUtils.getPositionDate(this._start,this._end,l-o,a),_=this.getDiscreteViewportPanningLength(this._start,h);if(i){var c=s.TimeAxisUtils.getDatePosition(this._start,this._end,this._viewEndTime,a),d=s.TimeAxisUtils.getPositionDate(this._start,this._end,c+o,a);_=a+this.getDiscreteViewportPanningLength(this._start,d)}var g=_+this._discreteOffset+this._startPos;this.panZoomCanvasBy(g),this._viewStartTime=r,this._viewEndTime=n},e.Timeline=A,e.TimelineOverview=u,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ojtimeline-toolkit.js.map